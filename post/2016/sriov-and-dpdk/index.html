<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>SR-IOV and DPDK | Keep calm and Write something</title><meta name=title content="SR-IOV and DPDK"><meta name=description content="SR-IOV and DPDK
Accelerating the NFV Data Plane : SR-IOV and DPDK… in my own words 를 읽고 요약
Before HW assisted Virtualisation
SR-IOV  전까지는 VMM이 패킷 송수신에 매번 개입해야 했음.

1st interrupt from NIC to VMM
2nd interrupt from VMM to VM

Intel VMDq
Only one interrupt from NIC to VM as each VM has its own Rx queue.
SR-IOV

SR-IOV  : Standard IO memory Memory Management Unit from Intel(VT-d) and AMD(IOV)
Virtual Function - Limited, lightweight, PCIe resource and a dedicated Tx/Rx packet queue
Interrupt 부담이 없다고 하는데 왜??? 마지막 결론에서는 SR-IOV를 사용하면 interrupt를 두 개 다 없앨 수 있다고 하는데 이 부분은 잘 이해가 안된다.
HW  기반

SR-IOV and vSwitch
SR-IOV는 VMM의 부담을 덜어주는 장점을 가지고 있지만, 반대로 vSwitch가 제공할 수 있는 네트웍 기능들 - portability, flexibility, QoS, complex traffic steering 등을 이용할 수 없게 되었다는. 문제는 이런 기능들이 NFV환경에서 필요하고(할 거고). vSwitch의 기능을 사용할 수 없으면 service chaining 같은 건 고민할 것도 없고, 위 기능들을 모두 각 VNF에서 구현해야 하는데. 물론 기존 PNF가 그랬던 것 처럼 못할 것도 없지만, 한 곳에 모아놓은 VNF사이에 구현해야 하는 공통 기능이면 가능하면 NFVI에서 구현할 수 있으면 좋겠지"><meta name=keywords content="DPDK,SRIOV,VNF,nfv,"><meta property="og:url" content="https://cychong47.github.io/post/2016/sriov-and-dpdk/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="SR-IOV and DPDK"><meta property="og:description" content="SR-IOV and DPDK
Accelerating the NFV Data Plane : SR-IOV and DPDK… in my own words 를 읽고 요약
Before HW assisted Virtualisation SR-IOV 전까지는 VMM이 패킷 송수신에 매번 개입해야 했음.
1st interrupt from NIC to VMM 2nd interrupt from VMM to VM Intel VMDq Only one interrupt from NIC to VM as each VM has its own Rx queue.
SR-IOV SR-IOV : Standard IO memory Memory Management Unit from Intel(VT-d) and AMD(IOV) Virtual Function - Limited, lightweight, PCIe resource and a dedicated Tx/Rx packet queue Interrupt 부담이 없다고 하는데 왜??? 마지막 결론에서는 SR-IOV를 사용하면 interrupt를 두 개 다 없앨 수 있다고 하는데 이 부분은 잘 이해가 안된다. HW 기반 SR-IOV and vSwitch SR-IOV는 VMM의 부담을 덜어주는 장점을 가지고 있지만, 반대로 vSwitch가 제공할 수 있는 네트웍 기능들 - portability, flexibility, QoS, complex traffic steering 등을 이용할 수 없게 되었다는. 문제는 이런 기능들이 NFV환경에서 필요하고(할 거고). vSwitch의 기능을 사용할 수 없으면 service chaining 같은 건 고민할 것도 없고, 위 기능들을 모두 각 VNF에서 구현해야 하는데. 물론 기존 PNF가 그랬던 것 처럼 못할 것도 없지만, 한 곳에 모아놓은 VNF사이에 구현해야 하는 공통 기능이면 가능하면 NFVI에서 구현할 수 있으면 좋겠지"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2016-02-07T23:40:26+09:00"><meta property="article:modified_time" content="2018-04-01T02:38:40+00:00"><meta property="article:tag" content="DPDK"><meta property="article:tag" content="SRIOV"><meta property="article:tag" content="VNF"><meta property="article:tag" content="NFV"><meta name=twitter:card content="summary"><meta name=twitter:title content="SR-IOV and DPDK"><meta name=twitter:description content="SR-IOV and DPDK
Accelerating the NFV Data Plane : SR-IOV and DPDK… in my own words 를 읽고 요약
Before HW assisted Virtualisation SR-IOV 전까지는 VMM이 패킷 송수신에 매번 개입해야 했음.
1st interrupt from NIC to VMM 2nd interrupt from VMM to VM Intel VMDq Only one interrupt from NIC to VM as each VM has its own Rx queue.
SR-IOV SR-IOV : Standard IO memory Memory Management Unit from Intel(VT-d) and AMD(IOV) Virtual Function - Limited, lightweight, PCIe resource and a dedicated Tx/Rx packet queue Interrupt 부담이 없다고 하는데 왜??? 마지막 결론에서는 SR-IOV를 사용하면 interrupt를 두 개 다 없앨 수 있다고 하는데 이 부분은 잘 이해가 안된다. HW 기반 SR-IOV and vSwitch SR-IOV는 VMM의 부담을 덜어주는 장점을 가지고 있지만, 반대로 vSwitch가 제공할 수 있는 네트웍 기능들 - portability, flexibility, QoS, complex traffic steering 등을 이용할 수 없게 되었다는. 문제는 이런 기능들이 NFV환경에서 필요하고(할 거고). vSwitch의 기능을 사용할 수 없으면 service chaining 같은 건 고민할 것도 없고, 위 기능들을 모두 각 VNF에서 구현해야 하는데. 물론 기존 PNF가 그랬던 것 처럼 못할 것도 없지만, 한 곳에 모아놓은 VNF사이에 구현해야 하는 공통 기능이면 가능하면 NFVI에서 구현할 수 있으면 좋겠지"><meta itemprop=name content="SR-IOV and DPDK"><meta itemprop=description content="SR-IOV and DPDK
Accelerating the NFV Data Plane : SR-IOV and DPDK… in my own words 를 읽고 요약
Before HW assisted Virtualisation SR-IOV 전까지는 VMM이 패킷 송수신에 매번 개입해야 했음.
1st interrupt from NIC to VMM 2nd interrupt from VMM to VM Intel VMDq Only one interrupt from NIC to VM as each VM has its own Rx queue.
SR-IOV SR-IOV : Standard IO memory Memory Management Unit from Intel(VT-d) and AMD(IOV) Virtual Function - Limited, lightweight, PCIe resource and a dedicated Tx/Rx packet queue Interrupt 부담이 없다고 하는데 왜??? 마지막 결론에서는 SR-IOV를 사용하면 interrupt를 두 개 다 없앨 수 있다고 하는데 이 부분은 잘 이해가 안된다. HW 기반 SR-IOV and vSwitch SR-IOV는 VMM의 부담을 덜어주는 장점을 가지고 있지만, 반대로 vSwitch가 제공할 수 있는 네트웍 기능들 - portability, flexibility, QoS, complex traffic steering 등을 이용할 수 없게 되었다는. 문제는 이런 기능들이 NFV환경에서 필요하고(할 거고). vSwitch의 기능을 사용할 수 없으면 service chaining 같은 건 고민할 것도 없고, 위 기능들을 모두 각 VNF에서 구현해야 하는데. 물론 기존 PNF가 그랬던 것 처럼 못할 것도 없지만, 한 곳에 모아놓은 VNF사이에 구현해야 하는 공통 기능이면 가능하면 NFVI에서 구현할 수 있으면 좋겠지"><meta itemprop=datePublished content="2016-02-07T23:40:26+09:00"><meta itemprop=dateModified content="2018-04-01T02:38:40+00:00"><meta itemprop=wordCount content="389"><meta itemprop=keywords content="DPDK,SRIOV,VNF,NFV"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><p>SR-IOV and DPDK</p><p><a href=http://www.metaswitch.com/the-switch/accelerating-the-nfv-data-plane>Accelerating the NFV Data Plane : SR-IOV and DPDK… in my own words</a> 를 읽고 요약</p><h2 id=before-hw-assisted-virtualisation>Before HW assisted Virtualisation</h2><p>SR-IOV 전까지는 VMM이 패킷 송수신에 매번 개입해야 했음.</p><ul><li>1st interrupt from NIC to VMM</li><li>2nd interrupt from VMM to VM</li></ul><h2 id=intel-vmdq>Intel VMDq</h2><p>Only one interrupt from NIC to VM as each VM has its own Rx queue.</p><h2 id=sr-iov>SR-IOV</h2><ul><li>SR-IOV : Standard IO memory Memory Management Unit from Intel(VT-d) and AMD(IOV)</li><li>Virtual Function - Limited, lightweight, PCIe resource and a dedicated Tx/Rx packet queue</li><li>Interrupt 부담이 없다고 하는데 왜??? 마지막 결론에서는 SR-IOV를 사용하면 interrupt를 두 개 다 없앨 수 있다고 하는데 이 부분은 잘 이해가 안된다.
HW 기반</li></ul><h2 id=sr-iov-and-vswitch>SR-IOV and vSwitch</h2><p>SR-IOV는 VMM의 부담을 덜어주는 장점을 가지고 있지만, 반대로 vSwitch가 제공할 수 있는 네트웍 기능들 - portability, flexibility, QoS, complex traffic steering 등을 이용할 수 없게 되었다는. 문제는 이런 기능들이 NFV환경에서 필요하고(할 거고). vSwitch의 기능을 사용할 수 없으면 service chaining 같은 건 고민할 것도 없고, 위 기능들을 모두 각 VNF에서 구현해야 하는데. 물론 기존 PNF가 그랬던 것 처럼 못할 것도 없지만, 한 곳에 모아놓은 VNF사이에 구현해야 하는 공통 기능이면 가능하면 NFVI에서 구현할 수 있으면 좋겠지</p><p>SR-IOV is good for stand-alone virtualised appliance or architecture where high-traffic VNFs, routers and L3 centric devices
vSwitch is good for strict intra-host east-west demands</p><p>Hybrid architecture requires additional management complexities and rule out the possibility of a common, efficient and flexible SDN shot deployment infrastructure</p><p>SR-IOV it isn’t currently possible to take advantage of overlay-based network virtualization, which is commonly used in large-scale virtualization environments.</p><p>Accelerated vSwitch solutions do support overlay-based network virtualization, they are less efficient overall and they may also expose additional security risks through the use of shared memory that may be accessible from untrusted VMs on the same compute node.</p><h2 id=ovsdpdk>OVS/DPDK</h2><p>Megaflow : wildcard<br>Micro flow : exact match based cache</p><p>Except 64B, SR-IOV and OVS/DPDK shows almost same performance against Bare-Metal (HP)
<a href=http://www.slideshare.net/jstleger/dpdk-summit-2015-hp-al-sanders>http://www.slideshare.net/jstleger/dpdk-summit-2015-hp-al-sanders</a></p><p>However, IMAX shows 50-60% is 64Byte</p><p><a href=http://www.metaswitch.com/the-switch/tackling-the-nfv-packet-performance-challenge>http://www.metaswitch.com/the-switch/tackling-the-nfv-packet-performance-challenge</a></p><p><a href=http://www.metaswitch.com/the-switch/tackling-the-nfv-packet-performance-challenge>Tackling the NFV Packet Performance Challenge</a></p><h2 id=sr-iov-vs-virtue>SR-IOV vs. virtue</h2><p>SRIOV is good for some cases in a VM but does not scale to many VMs or containers as NIC’s support for VF is limited in number and performance<br>SRIOV is very god in the host user space to gain direct access to the devices.</p><p>Right-now, virtue is the only solution we have today as a standard</p></content><p><a href=https://cychong47.github.io/tags/dpdk/>#DPDK</a>
<a href=https://cychong47.github.io/tags/sriov/>#SRIOV</a>
<a href=https://cychong47.github.io/tags/vnf/>#VNF</a>
<a href=https://cychong47.github.io/tags/nfv/>#NFV</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>