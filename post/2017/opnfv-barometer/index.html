<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>OPNFV Barometer and VES | Keep calm and Write something</title><meta name=title content="OPNFV Barometer and VES"><meta name=description content="Summary
The VES can be supported with the help of Kafka broker with the collectd in OPNFV Barometer project which is aim to collect telemetrics from the NFVI.
Barometer Project
The purpose of this project is providing metrics can be used to decide quality of NFVI. For this, the followings are reported

NIC statistics
Resources such as CPU, Memory, load, cache, themals, fan speeds, voltages and machine check exceptions.

This means the output of this project will be used in the host itself as well as inside of VM."><meta name=keywords content="barometer,opnfv,collectd,kafka,"><meta property="og:url" content="https://cychong47.github.io/post/2017/opnfv-barometer/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="OPNFV Barometer and VES"><meta property="og:description" content="Summary The VES can be supported with the help of Kafka broker with the collectd in OPNFV Barometer project which is aim to collect telemetrics from the NFVI.
Barometer Project The purpose of this project is providing metrics can be used to decide quality of NFVI. For this, the followings are reported
NIC statistics Resources such as CPU, Memory, load, cache, themals, fan speeds, voltages and machine check exceptions. This means the output of this project will be used in the host itself as well as inside of VM."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-09-25T15:05:40+09:00"><meta property="article:modified_time" content="2018-04-01T02:38:51+00:00"><meta property="article:tag" content="Barometer"><meta property="article:tag" content="Opnfv"><meta property="article:tag" content="Collectd"><meta property="article:tag" content="Kafka"><meta name=twitter:card content="summary"><meta name=twitter:title content="OPNFV Barometer and VES"><meta name=twitter:description content="Summary The VES can be supported with the help of Kafka broker with the collectd in OPNFV Barometer project which is aim to collect telemetrics from the NFVI.
Barometer Project The purpose of this project is providing metrics can be used to decide quality of NFVI. For this, the followings are reported
NIC statistics Resources such as CPU, Memory, load, cache, themals, fan speeds, voltages and machine check exceptions. This means the output of this project will be used in the host itself as well as inside of VM."><meta itemprop=name content="OPNFV Barometer and VES"><meta itemprop=description content="Summary The VES can be supported with the help of Kafka broker with the collectd in OPNFV Barometer project which is aim to collect telemetrics from the NFVI.
Barometer Project The purpose of this project is providing metrics can be used to decide quality of NFVI. For this, the followings are reported
NIC statistics Resources such as CPU, Memory, load, cache, themals, fan speeds, voltages and machine check exceptions. This means the output of this project will be used in the host itself as well as inside of VM."><meta itemprop=datePublished content="2017-09-25T15:05:40+09:00"><meta itemprop=dateModified content="2018-04-01T02:38:51+00:00"><meta itemprop=wordCount content="568"><meta itemprop=keywords content="Barometer,Opnfv,Collectd,Kafka"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><h1 id=summary>Summary</h1><p>The VES can be supported with the help of Kafka broker with the collectd in OPNFV Barometer project which is aim to collect telemetrics from the NFVI.</p><h1 id=barometer-project>Barometer Project</h1><p><a href=https://wiki.opnfv.org/display/fastpath/Barometer+Home>The purpose of this project</a> is providing metrics can be used to decide quality of NFVI. For this, the followings are reported</p><ul><li>NIC statistics</li><li>Resources such as CPU, Memory, load, cache, themals, fan speeds, voltages and machine check exceptions.</li></ul><p>This means the output of this project will be used in the host itself as well as inside of VM.</p><p>The original project name was &ldquo;Software Fastpath Service Quality Metrics&rdquo;.</p><h2 id=collectd>Collectd</h2><p>Barometer project uses <a href=https://collectd.org>collectd</a> open source project(<a href=https://wiki.opnfv.org/display/fastpath/Collectd+101>https://wiki.opnfv.org/display/fastpath/Collectd+101</a>)
It was already provide a lot of statistics can be collected from the system(usually unix systme)</p><p><img src=https://collectd.org/images/architecture-schematic.png alt="collectd architecture"></p><h3 id=input-and-output-plugins>Input and output plugins</h3><p>To support diverse of data and interface, collectd has input and output plugin. The input plugins fed the data to the collectd and output plugins export the data to other system.</p><p>The supported plugins are listed in <a href="https://git.octo.it/?p=collectd.git;a=blob;hb=master;f=README">here</a>.</p><h3 id=reference>Reference</h3><ul><li><a href=https://wiki.opnfv.org/display/fastpath/Collectd+101>Collectd 101</a></li><li><a href=https://wiki.opnfv.org/display/fastpath/Collectd+advantages%2C+disadvantages+and+a+few+asides>Collectd advantages, disadvantages and a few asides</a></li></ul><h2 id=barometer-and-collectd>Barometer and Collectd</h2><p>Barometer develops <a href=http://artifacts.opnfv.org/barometer/docs/index.html#document-release/userguide/index>several plugins</a> for collectd.</p><ul><li>dpdkstat plugin: A read plugin that retrieves stats from the DPDK extended NIC stats API.</li><li>dpdkevents plugin: A read plugin that retrieves DPDK link status and DPDK forwarding cores liveliness status (DPDK Keep Alive).</li><li>gnocchi plugin: A write plugin that pushes the retrieved stats to Gnocchi. It’s capable of pushing any stats read through collectd to Gnocchi, not just the DPDK stats.</li><li>aodh plugin: A notification plugin that pushes events to Aodh, and creates/updates alarms appropriately.</li><li>hugepages plugin: A read plugin that retrieves the number of available and free hugepages on a platform as well as what is available in terms of hugepages per socket.</li><li>Open vSwitch events Plugin: A read plugin that retrieves events from OVS.</li><li>Open vSwitch stats Plugin: A read plugin that retrieves flow and interface stats from OVS.</li><li>mcelog plugin: A read plugin that uses mcelog client protocol to check for memory Machine Check Exceptions and sends the stats for reported exceptions.</li><li>PMU plugin: A read plugin that provides performance counters data on Intel CPUs using Linux perf interface.</li><li>RDT plugin: A read plugin that provides the last level cache utilization and memory bandwidth utilization.</li><li>virt: A read plugin that uses virtualization API libvirt to gather statistics about virtualized guests on a system directly from the hypervisor, without a need to install collectd instance on the guest.</li><li>SNMP Agent: A write plugin that will act as a AgentX subagent that receives and handles queries from SNMP master agent and returns the data collected by read plugins. The SNMP Agent plugin handles requests only for OIDs specified in configuration file. To handle SNMP queries the plugin gets data from collectd and translates requested values from collectd’s internal format to SNMP format. Supports SNMP: get, getnext and walk requests.</li></ul><h2 id=ves-plugin-for-collectd>VES Plugin for collectd</h2><p><a href=https://wiki.opnfv.org/display/fastpath/VES+plugin+updates>https://wiki.opnfv.org/display/fastpath/VES+plugin+updates</a></p><h3 id=1st-design---implemented-as-collectd-output-plugin>1st design - Implemented as Collectd Output plugin</h3><p><img src=/images/2017/09/image2017-9-19-10_26_47.png alt=image2017-9-19-10_26_47></p><ul><li>The VES collectd plugin as output plugin of collectd</li><li>VES plugin get the data from the collectd and export to VES collector in VES format</li><li>VES schema change requires VES collectd plugin updated</li><li>Collectd requries MIT license while OPNFV prefer Apache license</li></ul><h3 id=2nd-design---use-kafka-broker>2nd design - Use Kafka broker</h3><p><img src=/images/2017/09/image2017-9-19-10_36_57.png alt=image2017-9-19-10_36_57></p><p>VES Application(not collectd plugin anymore) get the data from the Kafka broker and convert the data based on the <strong>YAML configuration(collectd stats to VES events)</strong></p><h1 id=reference-1>Reference</h1><p><a href=http://epicdevs.com/17>[Apache Kafka] 1. 소개및 아키텍처 정리</a></p></content><p><a href=https://cychong47.github.io/tags/barometer/>#Barometer</a>
<a href=https://cychong47.github.io/tags/opnfv/>#Opnfv</a>
<a href=https://cychong47.github.io/tags/collectd/>#Collectd</a>
<a href=https://cychong47.github.io/tags/kafka/>#Kafka</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>