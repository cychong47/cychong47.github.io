<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Install Wordpress with docker | Keep calm and Write something</title><meta name=title content="Install Wordpress with docker"><meta name=description content='Summary
docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql

docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress
If required, import database to mysql
(Once wordpress data is imported into mysql, upgrading mysql does not requires re-import ingof wordpress data)
mysql
install container
cychong:~ cychong$ docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql
Unable to find image &#39;mysql:latest&#39; locally
latest: Pulling from library/mysql
aa18ad1a0d33: Pull complete 
a5745c3b8bcc: Pull complete 
76375fcd129c: Pull complete 
4f72cfb004cf: Pull complete 
1d6a01e515fb: Pull complete 
a71e1163fa7e: Pull complete 
8c1a568fa442: Pull complete 
e7a69cecc173: Pull complete 
9759a0f979a1: Pull complete 
3f71dac6110f: Pull complete 
58f37de54392: Pull complete 
Digest: sha256:790b7b18b832822ef400e44ad9fac885a746db1a7028ec52325730cf9b831753
Status: Downloaded newer image for mysql:latest
b1f54c680120898fc7ff16751048fe18ae461399d5d7f10308c156c68d40577b
check container is started
cychong:~ cychong$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
b1f54c680120        mysql               "docker-entrypoint..."   13 seconds ago      Up 10 seconds       3306/tcp                 mysql
dea965b550e6        ghost:latest        "docker-entrypoint..."   8 days ago          Up 8 days           0.0.0.0:2368->2368/tcp   ghost
check files are located where volume is mounted
cychong:~/Dropbox/Apps/wordpress/database cychong$ ls
auto.cnf		ib_buffer_pool		mysql			server-key.pem
ca-key.pem		ib_logfile0		performance_schema	sys
ca.pem			ib_logfile1		private_key.pem		wordpress_db
client-cert.pem		ibdata1			public_key.pem
client-key.pem		ibtmp1			server-cert.pem
wordpress
install container
cychong:~ cychong$ docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress
525ba1e4fff2caccc020960908e4f538be9512c2541e62a94c5a36a341e7ff3c

cychong:~ cychong$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
525ba1e4fff2        wordpress           "docker-entrypoint..."   44 seconds ago      Up 42 seconds       0.0.0.0:80->80/tcp       wpcontainer
b1f54c680120        mysql               "docker-entrypoint..."   11 minutes ago      Up 11 minutes       3306/tcp                 mysql
dea965b550e6        ghost:latest        "docker-entrypoint..."   8 days ago          Up 8 days           0.0.0.0:2368->2368/tcp   ghost
check containers
cychong:~ cychong$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                    NAMES
8ea2303518ad        wordpress           "docker-entrypoint..."   About a minute ago   Up About a minute   0.0.0.0:80->80/tcp       wpcontainer
b1f54c680120        mysql               "docker-entrypoint..."   3 minutes ago        Up 3 minutes        3306/tcp                 mysql
dea965b550e6        ghost:latest        "docker-entrypoint..."   8 days ago           Up 8 days           0.0.0.0:2368->2368/tcp   ghost
check files
cychong:~ cychong$ ls Documents/wordpress/html/
index.php		wp-admin		wp-config.php		wp-links-opml.php	wp-settings.php
license.txt		wp-blog-header.php	wp-content		wp-load.php		wp-signup.php
readme.html		wp-comments-post.php	wp-cron.php		wp-login.php		wp-trackback.php
wp-activate.php		wp-config-sample.php	wp-includes		wp-mail.php		xmlrpc.php
mysql dump data is not imported.
copy mysql dump file to mounted volume directory'><meta name=keywords content="docker,container,wordpress,mysql,"><meta property="og:url" content="https://cychong47.github.io/post/2017/install-wordpress-with-docker/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="Install Wordpress with docker"><meta property="og:description" content='Summary docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress If required, import database to mysql (Once wordpress data is imported into mysql, upgrading mysql does not requires re-import ingof wordpress data)
mysql install container cychong:~ cychong$ docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql Unable to find image &#39;mysql:latest&#39; locally latest: Pulling from library/mysql aa18ad1a0d33: Pull complete a5745c3b8bcc: Pull complete 76375fcd129c: Pull complete 4f72cfb004cf: Pull complete 1d6a01e515fb: Pull complete a71e1163fa7e: Pull complete 8c1a568fa442: Pull complete e7a69cecc173: Pull complete 9759a0f979a1: Pull complete 3f71dac6110f: Pull complete 58f37de54392: Pull complete Digest: sha256:790b7b18b832822ef400e44ad9fac885a746db1a7028ec52325730cf9b831753 Status: Downloaded newer image for mysql:latest b1f54c680120898fc7ff16751048fe18ae461399d5d7f10308c156c68d40577b check container is started cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b1f54c680120 mysql "docker-entrypoint..." 13 seconds ago Up 10 seconds 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check files are located where volume is mounted cychong:~/Dropbox/Apps/wordpress/database cychong$ ls auto.cnf	ib_buffer_pool	mysql	server-key.pem ca-key.pem	ib_logfile0	performance_schema	sys ca.pem	ib_logfile1	private_key.pem	wordpress_db client-cert.pem	ibdata1	public_key.pem client-key.pem	ibtmp1	server-cert.pem wordpress install container cychong:~ cychong$ docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress 525ba1e4fff2caccc020960908e4f538be9512c2541e62a94c5a36a341e7ff3c cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 525ba1e4fff2 wordpress "docker-entrypoint..." 44 seconds ago Up 42 seconds 0.0.0.0:80->80/tcp wpcontainer b1f54c680120 mysql "docker-entrypoint..." 11 minutes ago Up 11 minutes 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check containers cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 8ea2303518ad wordpress "docker-entrypoint..." About a minute ago Up About a minute 0.0.0.0:80->80/tcp wpcontainer b1f54c680120 mysql "docker-entrypoint..." 3 minutes ago Up 3 minutes 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check files cychong:~ cychong$ ls Documents/wordpress/html/ index.php	wp-admin	wp-config.php	wp-links-opml.php	wp-settings.php license.txt	wp-blog-header.php	wp-content	wp-load.php	wp-signup.php readme.html	wp-comments-post.php	wp-cron.php	wp-login.php	wp-trackback.php wp-activate.php	wp-config-sample.php	wp-includes	wp-mail.php	xmlrpc.php mysql dump data is not imported. copy mysql dump file to mounted volume directory'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-12-19T22:20:06+09:00"><meta property="article:modified_time" content="2018-04-01T02:38:50+00:00"><meta property="article:tag" content="Docker"><meta property="article:tag" content="Container"><meta property="article:tag" content="Wordpress"><meta property="article:tag" content="Mysql"><meta name=twitter:card content="summary"><meta name=twitter:title content="Install Wordpress with docker"><meta name=twitter:description content='Summary docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress If required, import database to mysql (Once wordpress data is imported into mysql, upgrading mysql does not requires re-import ingof wordpress data)
mysql install container cychong:~ cychong$ docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql Unable to find image &#39;mysql:latest&#39; locally latest: Pulling from library/mysql aa18ad1a0d33: Pull complete a5745c3b8bcc: Pull complete 76375fcd129c: Pull complete 4f72cfb004cf: Pull complete 1d6a01e515fb: Pull complete a71e1163fa7e: Pull complete 8c1a568fa442: Pull complete e7a69cecc173: Pull complete 9759a0f979a1: Pull complete 3f71dac6110f: Pull complete 58f37de54392: Pull complete Digest: sha256:790b7b18b832822ef400e44ad9fac885a746db1a7028ec52325730cf9b831753 Status: Downloaded newer image for mysql:latest b1f54c680120898fc7ff16751048fe18ae461399d5d7f10308c156c68d40577b check container is started cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b1f54c680120 mysql "docker-entrypoint..." 13 seconds ago Up 10 seconds 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check files are located where volume is mounted cychong:~/Dropbox/Apps/wordpress/database cychong$ ls auto.cnf	ib_buffer_pool	mysql	server-key.pem ca-key.pem	ib_logfile0	performance_schema	sys ca.pem	ib_logfile1	private_key.pem	wordpress_db client-cert.pem	ibdata1	public_key.pem client-key.pem	ibtmp1	server-cert.pem wordpress install container cychong:~ cychong$ docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress 525ba1e4fff2caccc020960908e4f538be9512c2541e62a94c5a36a341e7ff3c cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 525ba1e4fff2 wordpress "docker-entrypoint..." 44 seconds ago Up 42 seconds 0.0.0.0:80->80/tcp wpcontainer b1f54c680120 mysql "docker-entrypoint..." 11 minutes ago Up 11 minutes 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check containers cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 8ea2303518ad wordpress "docker-entrypoint..." About a minute ago Up About a minute 0.0.0.0:80->80/tcp wpcontainer b1f54c680120 mysql "docker-entrypoint..." 3 minutes ago Up 3 minutes 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check files cychong:~ cychong$ ls Documents/wordpress/html/ index.php	wp-admin	wp-config.php	wp-links-opml.php	wp-settings.php license.txt	wp-blog-header.php	wp-content	wp-load.php	wp-signup.php readme.html	wp-comments-post.php	wp-cron.php	wp-login.php	wp-trackback.php wp-activate.php	wp-config-sample.php	wp-includes	wp-mail.php	xmlrpc.php mysql dump data is not imported. copy mysql dump file to mounted volume directory'><meta itemprop=name content="Install Wordpress with docker"><meta itemprop=description content='Summary docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress If required, import database to mysql (Once wordpress data is imported into mysql, upgrading mysql does not requires re-import ingof wordpress data)
mysql install container cychong:~ cychong$ docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql Unable to find image &#39;mysql:latest&#39; locally latest: Pulling from library/mysql aa18ad1a0d33: Pull complete a5745c3b8bcc: Pull complete 76375fcd129c: Pull complete 4f72cfb004cf: Pull complete 1d6a01e515fb: Pull complete a71e1163fa7e: Pull complete 8c1a568fa442: Pull complete e7a69cecc173: Pull complete 9759a0f979a1: Pull complete 3f71dac6110f: Pull complete 58f37de54392: Pull complete Digest: sha256:790b7b18b832822ef400e44ad9fac885a746db1a7028ec52325730cf9b831753 Status: Downloaded newer image for mysql:latest b1f54c680120898fc7ff16751048fe18ae461399d5d7f10308c156c68d40577b check container is started cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b1f54c680120 mysql "docker-entrypoint..." 13 seconds ago Up 10 seconds 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check files are located where volume is mounted cychong:~/Dropbox/Apps/wordpress/database cychong$ ls auto.cnf	ib_buffer_pool	mysql	server-key.pem ca-key.pem	ib_logfile0	performance_schema	sys ca.pem	ib_logfile1	private_key.pem	wordpress_db client-cert.pem	ibdata1	public_key.pem client-key.pem	ibtmp1	server-cert.pem wordpress install container cychong:~ cychong$ docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress 525ba1e4fff2caccc020960908e4f538be9512c2541e62a94c5a36a341e7ff3c cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 525ba1e4fff2 wordpress "docker-entrypoint..." 44 seconds ago Up 42 seconds 0.0.0.0:80->80/tcp wpcontainer b1f54c680120 mysql "docker-entrypoint..." 11 minutes ago Up 11 minutes 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check containers cychong:~ cychong$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 8ea2303518ad wordpress "docker-entrypoint..." About a minute ago Up About a minute 0.0.0.0:80->80/tcp wpcontainer b1f54c680120 mysql "docker-entrypoint..." 3 minutes ago Up 3 minutes 3306/tcp mysql dea965b550e6 ghost:latest "docker-entrypoint..." 8 days ago Up 8 days 0.0.0.0:2368->2368/tcp ghost check files cychong:~ cychong$ ls Documents/wordpress/html/ index.php	wp-admin	wp-config.php	wp-links-opml.php	wp-settings.php license.txt	wp-blog-header.php	wp-content	wp-load.php	wp-signup.php readme.html	wp-comments-post.php	wp-cron.php	wp-login.php	wp-trackback.php wp-activate.php	wp-config-sample.php	wp-includes	wp-mail.php	xmlrpc.php mysql dump data is not imported. copy mysql dump file to mounted volume directory'><meta itemprop=datePublished content="2017-12-19T22:20:06+09:00"><meta itemprop=dateModified content="2018-04-01T02:38:50+00:00"><meta itemprop=wordCount content="530"><meta itemprop=keywords content="Docker,Container,Wordpress,Mysql"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><h2 id=summary>Summary</h2><pre tabindex=0><code>docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql

docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress
</code></pre><p>If required, import database to mysql
(Once wordpress data is imported into mysql, upgrading mysql does not requires re-import ingof wordpress data)</p><h2 id=mysql>mysql</h2><h3 id=install-container>install container</h3><pre tabindex=0><code>cychong:~ cychong$ docker run --restart=always -e MYSQL_ROOT_PASSWORD=aqwe123 -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuser@ -e MYSQL_DATABASE=wordpress_db -v /Users/cychong/Dropbox/Apps/wordpress/database:/var/lib/mysql --name mysql -d mysql
Unable to find image &#39;mysql:latest&#39; locally
latest: Pulling from library/mysql
aa18ad1a0d33: Pull complete 
a5745c3b8bcc: Pull complete 
76375fcd129c: Pull complete 
4f72cfb004cf: Pull complete 
1d6a01e515fb: Pull complete 
a71e1163fa7e: Pull complete 
8c1a568fa442: Pull complete 
e7a69cecc173: Pull complete 
9759a0f979a1: Pull complete 
3f71dac6110f: Pull complete 
58f37de54392: Pull complete 
Digest: sha256:790b7b18b832822ef400e44ad9fac885a746db1a7028ec52325730cf9b831753
Status: Downloaded newer image for mysql:latest
b1f54c680120898fc7ff16751048fe18ae461399d5d7f10308c156c68d40577b
</code></pre><h3 id=check-container-is-started>check container is started</h3><pre tabindex=0><code>cychong:~ cychong$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
b1f54c680120        mysql               &#34;docker-entrypoint...&#34;   13 seconds ago      Up 10 seconds       3306/tcp                 mysql
dea965b550e6        ghost:latest        &#34;docker-entrypoint...&#34;   8 days ago          Up 8 days           0.0.0.0:2368-&gt;2368/tcp   ghost
</code></pre><h3 id=check-files-are-located-where-volume-is-mounted>check files are located where volume is mounted</h3><pre tabindex=0><code>cychong:~/Dropbox/Apps/wordpress/database cychong$ ls
auto.cnf		ib_buffer_pool		mysql			server-key.pem
ca-key.pem		ib_logfile0		performance_schema	sys
ca.pem			ib_logfile1		private_key.pem		wordpress_db
client-cert.pem		ibdata1			public_key.pem
client-key.pem		ibtmp1			server-cert.pem
</code></pre><h2 id=wordpress>wordpress</h2><h2 id=install-container-1>install container</h2><pre tabindex=0><code>cychong:~ cychong$ docker run --restart=always -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuser@ -e WORDPRESS_DB_NAME=wordpress_db -p 80:80 -v /Users/cychong/Documents/wordpress/html:/var/www/html -v /Users/cychong/Documents/wordpress/uploads:/var/www/html/wp-content/uploads -v /Users/cychong/Documents/wordpress/conf/php_uploads.ini:/usr/local/etc/php/conf.d/uploads.ini --link mysql:mysql --name wpcontainer -d wordpress
525ba1e4fff2caccc020960908e4f538be9512c2541e62a94c5a36a341e7ff3c

cychong:~ cychong$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
525ba1e4fff2        wordpress           &#34;docker-entrypoint...&#34;   44 seconds ago      Up 42 seconds       0.0.0.0:80-&gt;80/tcp       wpcontainer
b1f54c680120        mysql               &#34;docker-entrypoint...&#34;   11 minutes ago      Up 11 minutes       3306/tcp                 mysql
dea965b550e6        ghost:latest        &#34;docker-entrypoint...&#34;   8 days ago          Up 8 days           0.0.0.0:2368-&gt;2368/tcp   ghost
</code></pre><h3 id=check-containers>check containers</h3><pre tabindex=0><code>cychong:~ cychong$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                    NAMES
8ea2303518ad        wordpress           &#34;docker-entrypoint...&#34;   About a minute ago   Up About a minute   0.0.0.0:80-&gt;80/tcp       wpcontainer
b1f54c680120        mysql               &#34;docker-entrypoint...&#34;   3 minutes ago        Up 3 minutes        3306/tcp                 mysql
dea965b550e6        ghost:latest        &#34;docker-entrypoint...&#34;   8 days ago           Up 8 days           0.0.0.0:2368-&gt;2368/tcp   ghost
</code></pre><h3 id=check-files>check files</h3><pre tabindex=0><code>cychong:~ cychong$ ls Documents/wordpress/html/
index.php		wp-admin		wp-config.php		wp-links-opml.php	wp-settings.php
license.txt		wp-blog-header.php	wp-content		wp-load.php		wp-signup.php
readme.html		wp-comments-post.php	wp-cron.php		wp-login.php		wp-trackback.php
wp-activate.php		wp-config-sample.php	wp-includes		wp-mail.php		xmlrpc.php
</code></pre><h3 id=mysql-dump-data-is-not-imported>mysql dump data is not imported.</h3><p>copy mysql dump file to mounted volume directory</p><pre tabindex=0><code>cychong:~ cychong$ cp wordpress.dump.0910 ~/Dropbox/Apps/wordpress/database
</code></pre><p>Login to mysql container</p><pre tabindex=0><code>cychong:~ cychong$ docker exec -ti b1f54c680120 bash
root@b1f54c680120:/# ls
bin  boot  dev	docker-entrypoint-initdb.d  entrypoint.sh  etc	home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@b1f54c680120:/# cd /var/lib/mysql
root@b1f54c680120:/var/lib/mysql# ls
auto.cnf    client-cert.pem  ib_logfile0  ibtmp1	      private_key.pem  server-key.pem	    wordpress_db
ca-key.pem  client-key.pem   ib_logfile1  mysql		      public_key.pem   sys
ca.pem	    ib_buffer_pool   ibdata1	  performance_schema  server-cert.pem  wordpress.dump.0910
</code></pre><p>Import mysql dump file to mysql db</p><pre tabindex=0><code>root@b1f54c680120:/var/lib/mysql# mysql -h localhost -u root -p wordpress_db &lt; wordpress.dump.0910 
Enter password: 
root@b1f54c680120:/var/lib/mysql# 
</code></pre><p>This should be from the DB schema. Still don&rsquo;t know if data is imported properly</p><pre tabindex=0><code>root@b1f54c680120:/var/lib/mysql# mysqlshow -u root -p wordpress_db
Enter password: 
Database: wordpress_db
+-----------------------+
|        Tables         |
+-----------------------+
| wp_commentmeta        |
| wp_comments           |
| wp_links              |
| wp_options            |
| wp_postmeta           |
| wp_posts              |
| wp_term_relationships |
| wp_term_taxonomy      |
| wp_termmeta           |
| wp_terms              |
| wp_usermeta           |
| wp_users              |
+-----------------------+
</code></pre><h3 id=install-jetpack>Install jetpack</h3><p>And enable markdown from <code>Jetpack Setting > Writing</code></p><p>Done</p><p>#wordpress #docker</p></content><p><a href=https://cychong47.github.io/tags/docker/>#Docker</a>
<a href=https://cychong47.github.io/tags/container/>#Container</a>
<a href=https://cychong47.github.io/tags/wordpress/>#Wordpress</a>
<a href=https://cychong47.github.io/tags/mysql/>#Mysql</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>