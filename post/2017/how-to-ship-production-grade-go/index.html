<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>(요약) How to ship production-grade Go | Keep calm and Write something</title><meta name=title content="(요약) How to ship production-grade Go"><meta name=description content="출처 : O&rsquo;reilly radar
현장에서 발생하는 문제 몇 번 겪어본 사람이면 대부분 동의할 문제긴 한데 structured log 사용이나 application metric 측정 등은 오래
Wrap errors
Error handler wrapper function을 이용해서 error code(annotation 포함) 등을 잘 출력해서 분석이 쉽게 하자
Report panics
Panic을 내야 하는 경우에는 해당 사실을 어딘가 기록(하거나 전송해서 남기고) 패닉 처리하자.
Use structured logs
일반 text보다는 덜 human-readable하지만 SW를 이용해서 분석하기 쉬운 structured log를 남기자. ELK를 이용해 로그 분석하기도 용이하다.
Go stdlib이 제공하는 lib은 unstructured log만 지원하므로 logrus(http://github.com/Sirupsen/logrus)와 같은 3rd party package를 활용한다."><meta name=keywords content="golang,go,"><meta property="og:url" content="https://cychong47.github.io/post/2017/how-to-ship-production-grade-go/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="(요약) How to ship production-grade Go"><meta property="og:description" content="출처 : O’reilly radar
현장에서 발생하는 문제 몇 번 겪어본 사람이면 대부분 동의할 문제긴 한데 structured log 사용이나 application metric 측정 등은 오래
Wrap errors Error handler wrapper function을 이용해서 error code(annotation 포함) 등을 잘 출력해서 분석이 쉽게 하자
Report panics Panic을 내야 하는 경우에는 해당 사실을 어딘가 기록(하거나 전송해서 남기고) 패닉 처리하자.
Use structured logs 일반 text보다는 덜 human-readable하지만 SW를 이용해서 분석하기 쉬운 structured log를 남기자. ELK를 이용해 로그 분석하기도 용이하다.
Go stdlib이 제공하는 lib은 unstructured log만 지원하므로 logrus(http://github.com/Sirupsen/logrus)와 같은 3rd party package를 활용한다."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-05-04T12:24:27+09:00"><meta property="article:modified_time" content="2018-04-01T02:38:51+00:00"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Go"><meta name=twitter:card content="summary"><meta name=twitter:title content="(요약) How to ship production-grade Go"><meta name=twitter:description content="출처 : O’reilly radar
현장에서 발생하는 문제 몇 번 겪어본 사람이면 대부분 동의할 문제긴 한데 structured log 사용이나 application metric 측정 등은 오래
Wrap errors Error handler wrapper function을 이용해서 error code(annotation 포함) 등을 잘 출력해서 분석이 쉽게 하자
Report panics Panic을 내야 하는 경우에는 해당 사실을 어딘가 기록(하거나 전송해서 남기고) 패닉 처리하자.
Use structured logs 일반 text보다는 덜 human-readable하지만 SW를 이용해서 분석하기 쉬운 structured log를 남기자. ELK를 이용해 로그 분석하기도 용이하다.
Go stdlib이 제공하는 lib은 unstructured log만 지원하므로 logrus(http://github.com/Sirupsen/logrus)와 같은 3rd party package를 활용한다."><meta itemprop=name content="(요약) How to ship production-grade Go"><meta itemprop=description content="출처 : O’reilly radar
현장에서 발생하는 문제 몇 번 겪어본 사람이면 대부분 동의할 문제긴 한데 structured log 사용이나 application metric 측정 등은 오래
Wrap errors Error handler wrapper function을 이용해서 error code(annotation 포함) 등을 잘 출력해서 분석이 쉽게 하자
Report panics Panic을 내야 하는 경우에는 해당 사실을 어딘가 기록(하거나 전송해서 남기고) 패닉 처리하자.
Use structured logs 일반 text보다는 덜 human-readable하지만 SW를 이용해서 분석하기 쉬운 structured log를 남기자. ELK를 이용해 로그 분석하기도 용이하다.
Go stdlib이 제공하는 lib은 unstructured log만 지원하므로 logrus(http://github.com/Sirupsen/logrus)와 같은 3rd party package를 활용한다."><meta itemprop=datePublished content="2017-05-04T12:24:27+09:00"><meta itemprop=dateModified content="2018-04-01T02:38:51+00:00"><meta itemprop=wordCount content="150"><meta itemprop=keywords content="Golang,Go"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><p>출처 : <a href="https://www.oreilly.com/ideas/how-to-ship-production-grade-go?utm_medium=social&amp;utm_source=twitter.com&amp;utm_campaign=saeu17&amp;utm_content=live+training+joshi+jj&amp;cmp=tw-prog-trainreg-article-saeu17_training_go_joshi_ormt_jj">O&rsquo;reilly radar</a></p><p>현장에서 발생하는 문제 몇 번 겪어본 사람이면 대부분 동의할 문제긴 한데 structured log 사용이나 application metric 측정 등은 오래</p><h2 id=wrap-errors>Wrap errors</h2><p>Error handler wrapper function을 이용해서 error code(annotation 포함) 등을 잘 출력해서 분석이 쉽게 하자</p><h2 id=report-panics>Report panics</h2><p>Panic을 내야 하는 경우에는 해당 사실을 어딘가 기록(하거나 전송해서 남기고) 패닉 처리하자.</p><h2 id=use-structured-logs>Use structured logs</h2><p>일반 text보다는 덜 human-readable하지만 SW를 이용해서 분석하기 쉬운 structured log를 남기자. ELK를 이용해 로그 분석하기도 용이하다.<br>Go stdlib이 제공하는 <code>lib</code>은 unstructured log만 지원하므로 <code>logrus</code>(<a href=http://github.com/Sirupsen/logrus>http://github.com/Sirupsen/logrus</a>)와 같은 3rd party package를 활용한다.</p><pre><code>import log &quot;github.com/Sirupsen/logrus&quot; 

log.SetFormatter(&amp;log.JSONFormatter{}) 
log.WithFields(log.Fields{}).Info(&quot;Redirecting User&quot;)
</code></pre><h2 id=ship-application-metrics>Ship application metrics</h2><p>프로그램의 성능이나 쓰임새를 알 수 있는 metric 측정 기능을 구현하자.</p><ul><li>얼마나 많은 request에 대해 error response를 주는지?</li><li>99퍼센트의 request에 대한 응답 시간은?</li></ul><p>Native go client library를 제공하는 metric system들</p><ul><li><a href=https://www.datadoghq.com/>Datadog</a></li><li><a href=https://prometheus.io/>Prometheus</a></li><li><a href=https://prometheus.io/>StatsD + Graphite</a></li></ul><h2 id=write-more-tests-than-you-think-you-should>Write more tests than you think you should.</h2><p>API등은 더 자세히 테스트하자
필요하면 핵심 함수에 대해서는 code coverage를 측정하자.</p><p>go test -cover</p></content><p><a href=https://cychong47.github.io/tags/golang/>#Golang</a>
<a href=https://cychong47.github.io/tags/go/>#Go</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>