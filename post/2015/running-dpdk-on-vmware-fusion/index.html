<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Running DPDK on VMware Fusion | Keep calm and Write something</title><meta name=title content="Running DPDK on VMware Fusion"><meta name=description content="VirtualBox supports emulated e1000 NIC for VM while VMware fusion does not. VMware Fusion&rsquo;s VM  setting does not support configuring of NIC HW type. The NIC HW is PCnet32 which is not supported by DPDK.
However, we can change NIC HW type by editing VM configuration file directly.
Refer : How to emulate 10 Gbps NIC in a VMware Fusion VM
Edit vmx file to
VMX file is in where vmware image located"><meta name=keywords content="DPDK,Vmware,NIC,"><meta property="og:url" content="https://cychong47.github.io/post/2015/running-dpdk-on-vmware-fusion/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="Running DPDK on VMware Fusion"><meta property="og:description" content="VirtualBox supports emulated e1000 NIC for VM while VMware fusion does not. VMware Fusion’s VM setting does not support configuring of NIC HW type. The NIC HW is PCnet32 which is not supported by DPDK.
However, we can change NIC HW type by editing VM configuration file directly.
Refer : How to emulate 10 Gbps NIC in a VMware Fusion VM
Edit vmx file to VMX file is in where vmware image located"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2015-10-20T14:19:05+09:00"><meta property="article:modified_time" content="2018-04-01T02:38:40+00:00"><meta property="article:tag" content="DPDK"><meta property="article:tag" content="Vmware"><meta property="article:tag" content="NIC"><meta name=twitter:card content="summary"><meta name=twitter:title content="Running DPDK on VMware Fusion"><meta name=twitter:description content="VirtualBox supports emulated e1000 NIC for VM while VMware fusion does not. VMware Fusion’s VM setting does not support configuring of NIC HW type. The NIC HW is PCnet32 which is not supported by DPDK.
However, we can change NIC HW type by editing VM configuration file directly.
Refer : How to emulate 10 Gbps NIC in a VMware Fusion VM
Edit vmx file to VMX file is in where vmware image located"><meta itemprop=name content="Running DPDK on VMware Fusion"><meta itemprop=description content="VirtualBox supports emulated e1000 NIC for VM while VMware fusion does not. VMware Fusion’s VM setting does not support configuring of NIC HW type. The NIC HW is PCnet32 which is not supported by DPDK.
However, we can change NIC HW type by editing VM configuration file directly.
Refer : How to emulate 10 Gbps NIC in a VMware Fusion VM
Edit vmx file to VMX file is in where vmware image located"><meta itemprop=datePublished content="2015-10-20T14:19:05+09:00"><meta itemprop=dateModified content="2018-04-01T02:38:40+00:00"><meta itemprop=wordCount content="361"><meta itemprop=keywords content="DPDK,Vmware,NIC"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><p>VirtualBox supports emulated e1000 NIC for VM while VMware fusion does not. <strong>VMware Fusion&rsquo;s VM setting does not support configuring of NIC HW type</strong>. The NIC HW is PCnet32 which is not supported by DPDK.</p><p>However, we can change NIC HW type by editing VM configuration file directly.</p><p>Refer : <a href=http://thesolutionsarchitect.net/how-to-emulate-10-gbps-nic-in-a-vmware-fusion-vm/>How to emulate 10 Gbps NIC in a VMware Fusion VM</a></p><h5 id=edit-vmx-file-to>Edit vmx file to</h5><p>VMX file is in where vmware image located</p><p>For my case, this is where I can find</p><pre><code>~/Documents/Virtual Machines.localized/Ubuntu.vmwarevm/Ubuntu.vmx 
</code></pre><p><strong>Note</strong>. VMX file is updated when VM is closed. Therefore, changes on this file while VM is running is overwritten by the VM&rsquo;s current configuration. Be sure to <strong>quit</strong> VMware Fusion before changing this file.</p><pre><code>ethernet3.present = &quot;TRUE&quot;
ethernet3.connectionType = &quot;custom&quot;
ethernet3.wakeOnPcktRcv = &quot;FALSE&quot;
ethernet3.addressType = &quot;static&quot;
ethernet3.vnet = &quot;vmnet2&quot;
ethernet3.address = &quot;00:50:56:2B:EC:A4&quot;
</code></pre><p>The reference guides to change the <code>virtualDev</code> string from e1000 to something else(10G for vmxnet3). However, I can not find <code>ethernet3.virtualDev</code>. So I just add it.</p><pre><code>ethernet3.present = &quot;TRUE&quot;
ethernet3.connectionType = &quot;custom&quot;
ethernet3.wakeOnPcktRcv = &quot;FALSE&quot;
ethernet3.addressType = &quot;static&quot;
ethernet3.vnet = &quot;vmnet2&quot;
ethernet3.address = &quot;00:50:56:2B:EC:A4&quot;
ethernet3.virtualDev = &quot;e1000&quot;  
</code></pre><p>After starting VM, I can find VM has e1000 NIC for ethernet3.</p><p>Now, eth3 is e1000 NIC.</p><pre><code>$ ethtool -i eth3
driver: e1000
version: 7.3.21-k8-NAPI
firmware-version:
bus-info: 0000:02:07.0
supports-statistics: yes
supports-test: yes
supports-eeprom-access: yes
supports-register-dump: yes
supports-priv-flags: no
</code></pre><h5 id=vmxnet3-for-eth2>vmxnet3 for eth2</h5><p>Once more, convert eth2 to <code>vmxnet3</code></p><pre><code>ethernet2.present = &quot;TRUE&quot;
ethernet2.connectionType = &quot;bridged&quot;
ethernet2.wakeOnPcktRcv = &quot;FALSE&quot;
ethernet2.addressType = &quot;generated&quot;
ethernet2.linkStatePropagation.enable = &quot;TRUE&quot;
ethernet2.pciSlotNumber = &quot;160&quot;
ethernet2.generatedAddress = &quot;00:0c:29:52:14:e3&quot;
ethernet2.generatedAddressOffset = &quot;20&quot;
ethernet2.virtualDev = &quot;vmxnet3&quot;
</code></pre><p>And, it works too.</p><pre><code>$ ethtool -i eth2
driver: vmxnet3
version: 1.2.0.0-k-NAPI
firmware-version:
bus-info: 0000:03:00.0
supports-statistics: yes
supports-test: no
supports-eeprom-access: no
supports-register-dump: yes
supports-priv-flags: no
</code></pre><p>Note. &rsquo;e1000e&rsquo; is also supported.</p><pre><code>ethernet3.virtualDev = &quot;e1000e&quot;  
</code></pre><p>e1000 and e1000e are emulated device each for 1 Gbit Intel 82545EM card and 1 Gbit Intel 82574. e1000e is a newer one. <a href=http://rickardnobel.se/vmxnet3-vs-e1000e-and-e1000-part-1/>Reference</a></p><pre><code>$ ethtool -i eth3
driver: e1000e
</code></pre><h5 id=build-dpdk>Build DPDK</h5><p>The most easy way to build DPDK is using setup.sh</p><pre><code>$ source tools/setup.sh

Option: 10

================== Installing x86_64-native-linuxapp-gcc
Configuration done
== Build lib
...

Build complete [x86_64-native-linuxapp-gcc]
------------------------------------------------------------------------------
 RTE_TARGET exported as x86_64-native-linuxapp-gcc
</code></pre><p>Three important environments.</p><pre><code>RTE_ARCH=x86_64
RTE_SDK=/home/cychong/dpdk-2.1.0
RTE_TARGET=x86_64-native-linuxapp-gcc
</code></pre></content><p><a href=https://cychong47.github.io/tags/dpdk/>#DPDK</a>
<a href=https://cychong47.github.io/tags/vmware/>#Vmware</a>
<a href=https://cychong47.github.io/tags/nic/>#NIC</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>