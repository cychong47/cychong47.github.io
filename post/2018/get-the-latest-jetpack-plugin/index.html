<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Get the latest jetpack plugin | Keep calm and Write something</title><meta name=title content="Get the latest jetpack plugin"><meta name=description content='http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/ 의 연장선. Jetpack plugin의 최신 버전을 알아내서 자동으로 해당 바이너리 파일을 다운로드 받아 보자.
몇 가지 module 을 사용하는데 필요한 module은 https://realpython.com/python-web-scraping-practical-introduction/ 을 참고해서 설치
$ python3 -m venv venv
$ . ./venv/bin/activate
$ pip3 install requests BeautifulSoup4
webscrap.py
from requests import get
from requests.exceptions import RequestException
from contextlib import closing
from bs4 import BeautifulSoup
from urllib.request import *

&#39;&#39;&#39;
https://realpython.com/python-web-scraping-practical-introduction/
&#39;&#39;&#39;

def simple_get(url):
    """
    Attempts to get the content at `url` by making an HTTP GET request.
    If the content-type of response is some kind of HTML/XML, return the
    text content, otherwise return None.
    """
    try:
        with closing(get(url, stream=True)) as resp:
            if is_good_response(resp):
                return resp.content
            else:
                return None

    except RequestException as e:
        log_error(&#39;Error during requests to {0} : {1}&#39;.format(url, str(e)))
        return None


def is_good_response(resp):
    """
    Returns True if the response seems to be HTML, False otherwise.
    """
    content_type = resp.headers[&#39;Content-Type&#39;].lower()
    return (resp.status_code == 200
            and content_type is not None
            and content_type.find(&#39;html&#39;) > -1)


def log_error(e):
    """
    It is always a good idea to log errors.
    This function just prints them, but you can
    make it do anything.
    """
    print(e)

def download_file(base_url, filename):
	file_url = &#39;%s/%s&#39; %(base_url, filename)

	print("Download %s" %(file_url))
        
	try:
		from tqdm import tqdm
	except:
		urlretrieve(file_url, filename)
		return

	# use tqdm to display the progress but too slow
	file_response = get(file_url, stream=True)
	with open(filename, &#39;wb&#39;) as handle:
		for data in tqdm(file_response.iter_content()):
			handle.write(data)
Jetpack plugin 페이지에 있는 버전 정보를 이용해서 플러그인 다운로드 하기
tqdm은 progress를 보여주는 모듈인데 그냥 사용하면 속도가 너무 너무 느리다. 몇 초면 다운 받을 수 있는 파일을 1분에 걸쳐 받는&mldr;'><meta name=keywords content="Python,web-scrapping,"><meta property="og:url" content="https://cychong47.github.io/post/2018/get-the-latest-jetpack-plugin/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="Get the latest jetpack plugin"><meta property="og:description" content='http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/ 의 연장선. Jetpack plugin의 최신 버전을 알아내서 자동으로 해당 바이너리 파일을 다운로드 받아 보자.
몇 가지 module 을 사용하는데 필요한 module은 https://realpython.com/python-web-scraping-practical-introduction/ 을 참고해서 설치
$ python3 -m venv venv $ . ./venv/bin/activate $ pip3 install requests BeautifulSoup4 webscrap.py from requests import get from requests.exceptions import RequestException from contextlib import closing from bs4 import BeautifulSoup from urllib.request import * &#39;&#39;&#39; https://realpython.com/python-web-scraping-practical-introduction/ &#39;&#39;&#39; def simple_get(url): """ Attempts to get the content at `url` by making an HTTP GET request. If the content-type of response is some kind of HTML/XML, return the text content, otherwise return None. """ try: with closing(get(url, stream=True)) as resp: if is_good_response(resp): return resp.content else: return None except RequestException as e: log_error(&#39;Error during requests to {0} : {1}&#39;.format(url, str(e))) return None def is_good_response(resp): """ Returns True if the response seems to be HTML, False otherwise. """ content_type = resp.headers[&#39;Content-Type&#39;].lower() return (resp.status_code == 200 and content_type is not None and content_type.find(&#39;html&#39;) > -1) def log_error(e): """ It is always a good idea to log errors. This function just prints them, but you can make it do anything. """ print(e) def download_file(base_url, filename): file_url = &#39;%s/%s&#39; %(base_url, filename) print("Download %s" %(file_url)) try: from tqdm import tqdm except: urlretrieve(file_url, filename) return # use tqdm to display the progress but too slow file_response = get(file_url, stream=True) with open(filename, &#39;wb&#39;) as handle: for data in tqdm(file_response.iter_content()): handle.write(data) Jetpack plugin 페이지에 있는 버전 정보를 이용해서 플러그인 다운로드 하기 tqdm은 progress를 보여주는 모듈인데 그냥 사용하면 속도가 너무 너무 느리다. 몇 초면 다운 받을 수 있는 파일을 1분에 걸쳐 받는…'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-12-16T06:55:44+09:00"><meta property="article:modified_time" content="2018-12-17T13:24:07+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Web-Scrapping"><meta name=twitter:card content="summary"><meta name=twitter:title content="Get the latest jetpack plugin"><meta name=twitter:description content='http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/ 의 연장선. Jetpack plugin의 최신 버전을 알아내서 자동으로 해당 바이너리 파일을 다운로드 받아 보자.
몇 가지 module 을 사용하는데 필요한 module은 https://realpython.com/python-web-scraping-practical-introduction/ 을 참고해서 설치
$ python3 -m venv venv $ . ./venv/bin/activate $ pip3 install requests BeautifulSoup4 webscrap.py from requests import get from requests.exceptions import RequestException from contextlib import closing from bs4 import BeautifulSoup from urllib.request import * &#39;&#39;&#39; https://realpython.com/python-web-scraping-practical-introduction/ &#39;&#39;&#39; def simple_get(url): """ Attempts to get the content at `url` by making an HTTP GET request. If the content-type of response is some kind of HTML/XML, return the text content, otherwise return None. """ try: with closing(get(url, stream=True)) as resp: if is_good_response(resp): return resp.content else: return None except RequestException as e: log_error(&#39;Error during requests to {0} : {1}&#39;.format(url, str(e))) return None def is_good_response(resp): """ Returns True if the response seems to be HTML, False otherwise. """ content_type = resp.headers[&#39;Content-Type&#39;].lower() return (resp.status_code == 200 and content_type is not None and content_type.find(&#39;html&#39;) > -1) def log_error(e): """ It is always a good idea to log errors. This function just prints them, but you can make it do anything. """ print(e) def download_file(base_url, filename): file_url = &#39;%s/%s&#39; %(base_url, filename) print("Download %s" %(file_url)) try: from tqdm import tqdm except: urlretrieve(file_url, filename) return # use tqdm to display the progress but too slow file_response = get(file_url, stream=True) with open(filename, &#39;wb&#39;) as handle: for data in tqdm(file_response.iter_content()): handle.write(data) Jetpack plugin 페이지에 있는 버전 정보를 이용해서 플러그인 다운로드 하기 tqdm은 progress를 보여주는 모듈인데 그냥 사용하면 속도가 너무 너무 느리다. 몇 초면 다운 받을 수 있는 파일을 1분에 걸쳐 받는…'><meta itemprop=name content="Get the latest jetpack plugin"><meta itemprop=description content='http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/ 의 연장선. Jetpack plugin의 최신 버전을 알아내서 자동으로 해당 바이너리 파일을 다운로드 받아 보자.
몇 가지 module 을 사용하는데 필요한 module은 https://realpython.com/python-web-scraping-practical-introduction/ 을 참고해서 설치
$ python3 -m venv venv $ . ./venv/bin/activate $ pip3 install requests BeautifulSoup4 webscrap.py from requests import get from requests.exceptions import RequestException from contextlib import closing from bs4 import BeautifulSoup from urllib.request import * &#39;&#39;&#39; https://realpython.com/python-web-scraping-practical-introduction/ &#39;&#39;&#39; def simple_get(url): """ Attempts to get the content at `url` by making an HTTP GET request. If the content-type of response is some kind of HTML/XML, return the text content, otherwise return None. """ try: with closing(get(url, stream=True)) as resp: if is_good_response(resp): return resp.content else: return None except RequestException as e: log_error(&#39;Error during requests to {0} : {1}&#39;.format(url, str(e))) return None def is_good_response(resp): """ Returns True if the response seems to be HTML, False otherwise. """ content_type = resp.headers[&#39;Content-Type&#39;].lower() return (resp.status_code == 200 and content_type is not None and content_type.find(&#39;html&#39;) > -1) def log_error(e): """ It is always a good idea to log errors. This function just prints them, but you can make it do anything. """ print(e) def download_file(base_url, filename): file_url = &#39;%s/%s&#39; %(base_url, filename) print("Download %s" %(file_url)) try: from tqdm import tqdm except: urlretrieve(file_url, filename) return # use tqdm to display the progress but too slow file_response = get(file_url, stream=True) with open(filename, &#39;wb&#39;) as handle: for data in tqdm(file_response.iter_content()): handle.write(data) Jetpack plugin 페이지에 있는 버전 정보를 이용해서 플러그인 다운로드 하기 tqdm은 progress를 보여주는 모듈인데 그냥 사용하면 속도가 너무 너무 느리다. 몇 초면 다운 받을 수 있는 파일을 1분에 걸쳐 받는…'><meta itemprop=datePublished content="2018-12-16T06:55:44+09:00"><meta itemprop=dateModified content="2018-12-17T13:24:07+00:00"><meta itemprop=wordCount content="307"><meta itemprop=keywords content="Python,Web-Scrapping"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><p><a href=http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/>http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/</a> 의 연장선. Jetpack plugin의 최신 버전을 알아내서 자동으로 해당 바이너리 파일을 다운로드 받아 보자.</p><p>몇 가지 module 을 사용하는데 필요한 module은 <a href=https://realpython.com/python-web-scraping-practical-introduction/>https://realpython.com/python-web-scraping-practical-introduction/</a> 을 참고해서 설치</p><pre tabindex=0><code>$ python3 -m venv venv
$ . ./venv/bin/activate
$ pip3 install requests BeautifulSoup4
</code></pre><h2 id=webscrappy>webscrap.py</h2><pre tabindex=0><code>from requests import get
from requests.exceptions import RequestException
from contextlib import closing
from bs4 import BeautifulSoup
from urllib.request import *

&#39;&#39;&#39;
https://realpython.com/python-web-scraping-practical-introduction/
&#39;&#39;&#39;

def simple_get(url):
    &#34;&#34;&#34;
    Attempts to get the content at `url` by making an HTTP GET request.
    If the content-type of response is some kind of HTML/XML, return the
    text content, otherwise return None.
    &#34;&#34;&#34;
    try:
        with closing(get(url, stream=True)) as resp:
            if is_good_response(resp):
                return resp.content
            else:
                return None

    except RequestException as e:
        log_error(&#39;Error during requests to {0} : {1}&#39;.format(url, str(e)))
        return None


def is_good_response(resp):
    &#34;&#34;&#34;
    Returns True if the response seems to be HTML, False otherwise.
    &#34;&#34;&#34;
    content_type = resp.headers[&#39;Content-Type&#39;].lower()
    return (resp.status_code == 200
            and content_type is not None
            and content_type.find(&#39;html&#39;) &gt; -1)


def log_error(e):
    &#34;&#34;&#34;
    It is always a good idea to log errors.
    This function just prints them, but you can
    make it do anything.
    &#34;&#34;&#34;
    print(e)

def download_file(base_url, filename):
	file_url = &#39;%s/%s&#39; %(base_url, filename)

	print(&#34;Download %s&#34; %(file_url))
        
	try:
		from tqdm import tqdm
	except:
		urlretrieve(file_url, filename)
		return

	# use tqdm to display the progress but too slow
	file_response = get(file_url, stream=True)
	with open(filename, &#39;wb&#39;) as handle:
		for data in tqdm(file_response.iter_content()):
			handle.write(data)
</code></pre><p>Jetpack plugin 페이지에 있는 버전 정보를 이용해서 플러그인 다운로드 하기
tqdm은 progress를 보여주는 모듈인데 그냥 사용하면 속도가 너무 너무 느리다. 몇 초면 다운 받을 수 있는 파일을 1분에 걸쳐 받는&mldr;</p><h2 id=get_jetpackpy>get_jetpack.py</h2><pre tabindex=0><code>from webscrap import *

&#39;&#39;&#39;
https://realpython.com/python-web-scraping-practical-introduction/
https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python
&#39;&#39;&#39;

if __name__ == &#39;__main__&#39;:
    jetpack_url=&#39;https://wordpress.org/plugins/jetpack/&#39;
    jetpack_ver = None

    response = simple_get(jetpack_url)

    if response is not None:
        html = BeautifulSoup(response, &#39;html.parser&#39;)

        for i,l1 in enumerate(html.select(&#39;li&#39;)):
            if l1.text.strip().find(&#34;Version:&#34;) == 0:
                jetpack_ver = l1.text.strip().split()[1]
                break

        if jetpack_ver is not None:
            filename = &#39;jetpack.%s.zip&#39; %jetpack_ver
            download_file(jetpack_url, filename)
</code></pre></content><p><a href=https://cychong47.github.io/tags/python/>#Python</a>
<a href=https://cychong47.github.io/tags/web-scrapping/>#Web-Scrapping</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>