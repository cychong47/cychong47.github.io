<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Cuckoo Switch | Keep calm and Write something</title><meta name=title content="Cuckoo Switch"><meta name=description content="Cuckoo 알고리즘을 사용하여 Flow lookup과 flow update 성능을 높힌 것과 DPDK를 이용하여 패킷 처리 성능을 높힌 것
출처 : Scalable, High Performance Ethernet Forwarding with CuckooSwitch
DPDK

DPDK를 이용한 IO 성능 개선한 것 외에 특이한 것은 없음.

Cuckoo hashing


대개 FIB update를 위해 RCU(Read Copy Update)를 사용함. 이 경우 완전한 정보를 갖는 additional entry가 필요

수정된 cuckoo algorithm을 기반으로 한 flow table 사용



Basic Cuckoo hashing

ensures 50% table space utilization



4-way associative hash table has 95% utilization"><meta name=keywords content="논문,Algorithm,"><meta property="og:url" content="https://cychong47.github.io/post/2014/cuckoo-switch/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="Cuckoo Switch"><meta property="og:description" content="Cuckoo 알고리즘을 사용하여 Flow lookup과 flow update 성능을 높힌 것과 DPDK를 이용하여 패킷 처리 성능을 높힌 것
출처 : Scalable, High Performance Ethernet Forwarding with CuckooSwitch
DPDK DPDK를 이용한 IO 성능 개선한 것 외에 특이한 것은 없음. Cuckoo hashing 대개 FIB update를 위해 RCU(Read Copy Update)를 사용함. 이 경우 완전한 정보를 갖는 additional entry가 필요
수정된 cuckoo algorithm을 기반으로 한 flow table 사용 Basic Cuckoo hashing
ensures 50% table space utilization 4-way associative hash table has 95% utilization"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2014-11-09T08:48:38+09:00"><meta property="article:modified_time" content="2018-04-01T02:38:40+00:00"><meta property="article:tag" content="논문"><meta property="article:tag" content="Algorithm"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cuckoo Switch"><meta name=twitter:description content="Cuckoo 알고리즘을 사용하여 Flow lookup과 flow update 성능을 높힌 것과 DPDK를 이용하여 패킷 처리 성능을 높힌 것
출처 : Scalable, High Performance Ethernet Forwarding with CuckooSwitch
DPDK DPDK를 이용한 IO 성능 개선한 것 외에 특이한 것은 없음. Cuckoo hashing 대개 FIB update를 위해 RCU(Read Copy Update)를 사용함. 이 경우 완전한 정보를 갖는 additional entry가 필요
수정된 cuckoo algorithm을 기반으로 한 flow table 사용 Basic Cuckoo hashing
ensures 50% table space utilization 4-way associative hash table has 95% utilization"><meta itemprop=name content="Cuckoo Switch"><meta itemprop=description content="Cuckoo 알고리즘을 사용하여 Flow lookup과 flow update 성능을 높힌 것과 DPDK를 이용하여 패킷 처리 성능을 높힌 것
출처 : Scalable, High Performance Ethernet Forwarding with CuckooSwitch
DPDK DPDK를 이용한 IO 성능 개선한 것 외에 특이한 것은 없음. Cuckoo hashing 대개 FIB update를 위해 RCU(Read Copy Update)를 사용함. 이 경우 완전한 정보를 갖는 additional entry가 필요
수정된 cuckoo algorithm을 기반으로 한 flow table 사용 Basic Cuckoo hashing
ensures 50% table space utilization 4-way associative hash table has 95% utilization"><meta itemprop=datePublished content="2014-11-09T08:48:38+09:00"><meta itemprop=dateModified content="2018-04-01T02:38:40+00:00"><meta itemprop=wordCount content="322"><meta itemprop=keywords content="논문,Algorithm"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><p>Cuckoo 알고리즘을 사용하여 Flow lookup과 flow update 성능을 높힌 것과 DPDK를 이용하여 패킷 처리 성능을 높힌 것</p><p>출처 : <a href=https://www.cs.cmu.edu/~binfan/papers/conext13_cuckooswitch.pdf>Scalable, High Performance Ethernet Forwarding with CuckooSwitch</a></p><h2 id=dpdk>DPDK</h2><ul><li>DPDK를 이용한 IO 성능 개선한 것 외에 특이한 것은 없음.</li></ul><h2 id=cuckoo-hashing>Cuckoo hashing</h2><ul><li><p>대개 FIB update를 위해 RCU(Read Copy Update)를 사용함. 이 경우 완전한 정보를 갖는 additional entry가 필요</p><ul><li>수정된 cuckoo algorithm을 기반으로 한 flow table 사용</li></ul></li><li><p>Basic Cuckoo hashing</p><ul><li>ensures 50% table space utilization</li></ul></li><li><p>4-way associative hash table has 95% utilization</p><ul><li><a href=http://ondoc.logand.com/d/362/pdf>&lsquo;A cool and practical alternative to traditional hash tables&rsquo;</a></li><li>Only two cache-sized parallel memory accesses are required for lookup</li><li>What means &lsquo;4-way&rsquo;? Each hash bucket has 4 entries??? - FIXME Check the paper</li></ul></li><li><p>메모리 사용량 감소 및 multiple reader와 single writer가 동시에 접근할 수 있게 하여 lock 사용없이 FIB update 성능 개선</p><ul><li>Compact and concurrent memcache with dumber caching and smarter hashing</li><li><a href=https://www.usenix.org/system/files/conference/nsdi13/nsdi13-final197.pdf>&lsquo;Optimitic concurrent cuckoo hashing&rsquo;</a></li><li>More optimization for &mldr;. FIXME</li></ul></li><li><p>Compiler reorerding barriers</p><ul><li>&lsquo;a sequence of memory writes at one core are guaranteed to appear in the same order at all remote CPUs&rsquo;</li><li>If one cores write W1,W2 and W3 and the R1 from some core observes the effect of W3, then the R2 and R3 which is issued after R1 also observed the same effect</li><li>Check the words &ldquo;compiler reordering barriers&rdquo;</li><li>ensure the compiler does not reorder the store and read instructions using a compiler reordering barrier between the read operations which should keep the instruction order</li><li><code>__asm__ __volatile__("" ::: "memory")</code> in gcc</li><li>mark <code>volatile</code> for the fields to access</li></ul></li><li><p>Batch Hash table lookup</p><ul><li>If the size of the hash table cannot fit the fast CPU cache size, then performance drops dramatically.</li><li>For this, batching 16 packets for one lookup</li><li>Combine all the packets in the buffers as a single batch and perform hash table lookup at the same time</li><li>FIXME - How to batch lookups</li></ul></li><li><p>Prefetch</p><ul><li>FIXME</li></ul></li></ul><h2 id=performance>Performance</h2><ul><li>10^9 entries</li><li>350M lookups/second</li><li>0.5M updates/second</li></ul><h2 id=etc>etc.</h2><ul><li>RouteBricks(2009) - 35Gbps</li><li><a href=https://github.com/efficient/libcuckoo>https://github.com/efficient/libcuckoo</a><ul><li><a href=http://efficient.github.io/libcuckoo/>http://efficient.github.io/libcuckoo/</a></li></ul></li><li><a href=https://github.com/efficient/libcuckoo-c>https://github.com/efficient/libcuckoo-c</a></li></ul></content><p><a href=https://cychong47.github.io/tags/%EB%85%BC%EB%AC%B8/>#논문</a>
<a href=https://cychong47.github.io/tags/algorithm/>#Algorithm</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>