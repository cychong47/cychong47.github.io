<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Automate Blog Posting with GitHub Action | Keep calm and Write something</title><meta name=title content="Automate Blog Posting with GitHub Action"><meta name=description content='https://ruddra.com/hugo-deploy-static-page-using-github-actions/ 에 있는 내용대로 git repository의 .github/workflows 아래 main.yml 몇 가지만 수정했더니 잘 동작하는 듯.
이미 Hugo용 github repo를 가지고 있으므로 내가 추가로 해야 할일은

GitHub 계정에서 Access Token 만들어서 Git repository에 Secret로 추가
GitHub Action 파일 작성 - .github/workflows/main.yml

일단 이거면 끝.
.github/workflows/main.yml
name: CI
on: push
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Git checkout
        uses: actions/checkout@v2

      - name: Update theme
        # (Optional)If you have the theme added as submodule, you can pull it and use the most updated version
        run: git submodule update --init --recursive

      - name: Setup hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: "0.74.2"

      - name: Clean public directory
        run: rm -rf public
      - name: Build
        # remove --minify tag if you do not need it
        # docs: https://gohugo.io/hugo-pipes/minification/
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.TOKEN }}
          external_repository: cychong47/cychong47.github.io
          publish_dir: ./public
          #   keep_files: true
          user_name: Chaeyong Chong
          user_email: cychonggmail.com
          publish_branch: master
          cname: cychong47.github.io
수정한 부분은 Hugo 버전, Deploy 의 external_repository, user_name, user_email, cname 정도 뿐.'><meta name=keywords content="GitHub,“GitHub Action”,“automation”,“iOS-shortcut”,"><meta property="og:url" content="https://cychong47.github.io/post/2020/2020-08-19-automate-blog-posting-with-github-action/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="Automate Blog Posting with GitHub Action"><meta property="og:description" content='https://ruddra.com/hugo-deploy-static-page-using-github-actions/ 에 있는 내용대로 git repository의 .github/workflows 아래 main.yml 몇 가지만 수정했더니 잘 동작하는 듯.
이미 Hugo용 github repo를 가지고 있으므로 내가 추가로 해야 할일은
GitHub 계정에서 Access Token 만들어서 Git repository에 Secret로 추가 GitHub Action 파일 작성 - .github/workflows/main.yml 일단 이거면 끝.
.github/workflows/main.yml name: CI on: push jobs: deploy: runs-on: ubuntu-latest steps: - name: Git checkout uses: actions/checkout@v2 - name: Update theme # (Optional)If you have the theme added as submodule, you can pull it and use the most updated version run: git submodule update --init --recursive - name: Setup hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: "0.74.2" - name: Clean public directory run: rm -rf public - name: Build # remove --minify tag if you do not need it # docs: https://gohugo.io/hugo-pipes/minification/ run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: personal_token: ${{ secrets.TOKEN }} external_repository: cychong47/cychong47.github.io publish_dir: ./public # keep_files: true user_name: Chaeyong Chong user_email: cychonggmail.com publish_branch: master cname: cychong47.github.io 수정한 부분은 Hugo 버전, Deploy 의 external_repository, user_name, user_email, cname 정도 뿐.'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-08-19T23:01:58+09:00"><meta property="article:modified_time" content="2020-08-19T23:01:58+09:00"><meta property="article:tag" content="GitHub"><meta property="article:tag" content="“GitHub Action”"><meta property="article:tag" content="“Automation”"><meta property="article:tag" content="“IOS-Shortcut”"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automate Blog Posting with GitHub Action"><meta name=twitter:description content='https://ruddra.com/hugo-deploy-static-page-using-github-actions/ 에 있는 내용대로 git repository의 .github/workflows 아래 main.yml 몇 가지만 수정했더니 잘 동작하는 듯.
이미 Hugo용 github repo를 가지고 있으므로 내가 추가로 해야 할일은
GitHub 계정에서 Access Token 만들어서 Git repository에 Secret로 추가 GitHub Action 파일 작성 - .github/workflows/main.yml 일단 이거면 끝.
.github/workflows/main.yml name: CI on: push jobs: deploy: runs-on: ubuntu-latest steps: - name: Git checkout uses: actions/checkout@v2 - name: Update theme # (Optional)If you have the theme added as submodule, you can pull it and use the most updated version run: git submodule update --init --recursive - name: Setup hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: "0.74.2" - name: Clean public directory run: rm -rf public - name: Build # remove --minify tag if you do not need it # docs: https://gohugo.io/hugo-pipes/minification/ run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: personal_token: ${{ secrets.TOKEN }} external_repository: cychong47/cychong47.github.io publish_dir: ./public # keep_files: true user_name: Chaeyong Chong user_email: cychonggmail.com publish_branch: master cname: cychong47.github.io 수정한 부분은 Hugo 버전, Deploy 의 external_repository, user_name, user_email, cname 정도 뿐.'><meta itemprop=name content="Automate Blog Posting with GitHub Action"><meta itemprop=description content='https://ruddra.com/hugo-deploy-static-page-using-github-actions/ 에 있는 내용대로 git repository의 .github/workflows 아래 main.yml 몇 가지만 수정했더니 잘 동작하는 듯.
이미 Hugo용 github repo를 가지고 있으므로 내가 추가로 해야 할일은
GitHub 계정에서 Access Token 만들어서 Git repository에 Secret로 추가 GitHub Action 파일 작성 - .github/workflows/main.yml 일단 이거면 끝.
.github/workflows/main.yml name: CI on: push jobs: deploy: runs-on: ubuntu-latest steps: - name: Git checkout uses: actions/checkout@v2 - name: Update theme # (Optional)If you have the theme added as submodule, you can pull it and use the most updated version run: git submodule update --init --recursive - name: Setup hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: "0.74.2" - name: Clean public directory run: rm -rf public - name: Build # remove --minify tag if you do not need it # docs: https://gohugo.io/hugo-pipes/minification/ run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: personal_token: ${{ secrets.TOKEN }} external_repository: cychong47/cychong47.github.io publish_dir: ./public # keep_files: true user_name: Chaeyong Chong user_email: cychonggmail.com publish_branch: master cname: cychong47.github.io 수정한 부분은 Hugo 버전, Deploy 의 external_repository, user_name, user_email, cname 정도 뿐.'><meta itemprop=datePublished content="2020-08-19T23:01:58+09:00"><meta itemprop=dateModified content="2020-08-19T23:01:58+09:00"><meta itemprop=wordCount content="284"><meta itemprop=keywords content="GitHub,“GitHub Action”,“Automation”,“IOS-Shortcut”"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><p><a href=https://ruddra.com/hugo-deploy-static-page-using-github-actions/>https://ruddra.com/hugo-deploy-static-page-using-github-actions/</a> 에 있는 내용대로 git repository의 <code>.github/workflows</code> 아래 <code>main.yml</code> 몇 가지만 수정했더니 잘 동작하는 듯.</p><p>이미 Hugo용 github repo를 가지고 있으므로 내가 추가로 해야 할일은</p><ul><li>GitHub 계정에서 Access Token 만들어서 Git repository에 <code>Secret</code>로 추가</li><li>GitHub Action 파일 작성 - <code>.github/workflows/main.yml</code></li></ul><p>일단 이거면 끝.</p><h2 id=githubworkflowsmainyml><code>.github/workflows/main.yml</code></h2><pre tabindex=0><code>name: CI
on: push
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Git checkout
        uses: actions/checkout@v2

      - name: Update theme
        # (Optional)If you have the theme added as submodule, you can pull it and use the most updated version
        run: git submodule update --init --recursive

      - name: Setup hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: &#34;0.74.2&#34;

      - name: Clean public directory
        run: rm -rf public
      - name: Build
        # remove --minify tag if you do not need it
        # docs: https://gohugo.io/hugo-pipes/minification/
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.TOKEN }}
          external_repository: cychong47/cychong47.github.io
          publish_dir: ./public
          #   keep_files: true
          user_name: Chaeyong Chong
          user_email: cychonggmail.com
          publish_branch: master
          cname: cychong47.github.io
</code></pre><p>수정한 부분은 Hugo 버전, <code>Deploy</code> 의 <code>external_repository</code>, <code>user_name</code>, <code>user_email</code>, <code>cname</code> 정도 뿐.</p><h2 id=action>Action</h2><p><img src=/images/2020/08/2020-08-19-github-action-first-run.png alt></p><p>이제 파일을 하나 추가해 보고 잘 동작하는 지 봐야 할 텐데 위 그림 파일을 먼저 commit해 보고 잘 동작하는 지 봐야겠다.</p><p><img src=/images/2020/08/2020-08-19-github-action-run-on-commit.png alt></p><p>잘 동작하네. 신기하네….. ㅎㅎ</p><p>이제는 Bear에서 글을 쓰고, iOS shortcut을 이용해 commit하면 자동으로 블로그 업데이트는 GitHub Action이 알아서. 이젠 iPad에서 블로그에 글 올리는 게 진짜 편해졌네. 사람들이(주로 외국 사람들)이 왜 <code>Working Copy</code>를 그렇게 칭찬하는 지 조금 이해가 되네. GitHub나 GitLab등이 제공하는 자동화 기능을 iPad에서도 활용할 수 있는 중요한 glue 역할을 하네.</p><p><img src=/images/2020/08/2020-08-19-github-action-triggered-by-ios-shortcut.png alt></p><p>첫번째 사진에 있는 workflow를 보니 첫 단계인 <code>Set up job</code>과 마지막 2개 단계인 <code>Post Git Checkout</code>, <code>Complete job</code>을 제외한 나머지는 모두 workflow 파일에 기술된 내용이네.</p><pre tabindex=0><code>cychong15:workflows cychong$ grep &#34; name&#34; main.yml | awk -F &#34;:&#34; &#39;{print $2}&#39;
 Git checkout
 Update theme
 Setup hugo
 Clean public directory
 Build
 Deploy
</code></pre></content><p><a href=https://cychong47.github.io/tags/github/>#GitHub</a>
<a href=https://cychong47.github.io/tags/github-action/>#“GitHub Action”</a>
<a href=https://cychong47.github.io/tags/automation/>#“Automation”</a>
<a href=https://cychong47.github.io/tags/ios-shortcut/>#“IOS-Shortcut”</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>