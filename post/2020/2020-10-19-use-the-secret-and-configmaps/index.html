<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Use the Secret and ConfigMaps | Keep calm and Write something</title><meta name=title content="Use the Secret and ConfigMaps"><meta name=description content='Use the Secret and ConfigMaps
$ cat my-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
stringData:
    WSO2_CLOUD_ORG_KEY: "mycompany"
    WSO2_CLOUD_EMAIL: "sample-email@wso2.com"
    WSO2_CLOUD_PASSWORD: "password"

$ kubectl apply -f my-secret.yaml
secret/mysecret created
From Using Kubernetes Secrets as Environment Variables
    spec: 
      containers: 
        - 
          env: 
            - 
              name: WSO2_CLOUD_ORG_KEY
              valueFrom:
                secretKeyRef:
                  name: mysecret
                  key: WSO2_CLOUD_ORG_KEY
    ...

apiVersion: v1
kind: Secret
metadata:
  name: my-tokens
type: Opaque
stringData:
  pinboard_key: "FIXME"
  pocket_consumer_key: "FIXME"
  pocket_access_token: "FIXME"
  slack_api_token: "FIXME"
  slack_events_token: "FIXME"
  slack_verification_token: "FIXME"
  slack_signing_secret: "FIXME"
  telegram_token: "FIXME"
  telegram_api_id: "FIXME"
  telegram_api_hash: "FIXME"
$ kubectl apply -f my-tokens.yaml 
secret/my-tokens created

$ kubectl get secrets
NAME                             TYPE                                  DATA   AGE
default-token-57nq8              kubernetes.io/service-account-token   3      395d
grafana                          Opaque                                3      2d23h
grafana-test-token-88vrz         kubernetes.io/service-account-token   3      2d23h
grafana-token-zc79r              kubernetes.io/service-account-token   3      2d23h
influxdb-token-bjb5d             kubernetes.io/service-account-token   3      4d12h
my-secret                        kubernetes.io/dockerconfigjson        1      269d
my-tokens                        Opaque                                7      4s
sh.helm.release.v1.grafana.v1    helm.sh/release.v1                    1      2d23h
sh.helm.release.v1.influxdb.v1   helm.sh/release.v1                    1      4d12h
sh.helm.release.v1.podcast.v1    helm.sh/release.v1                    1      4d13h
sh.helm.release.v1.sosa0sa.v1    helm.sh/release.v1                    1      4d13h

$ kubectl get secrets my-tokens
NAME        TYPE     DATA   AGE
my-tokens   Opaque   7      7s

$ kubectl describe secret my-tokens
Name:         my-tokens
Namespace:    default
Labels:       <none>
Annotations:
Type:         Opaque

Data
====
pinboard_key:          30 bytes
slack_signing_secret:  32 bytes
telegram_api_id:       7 bytes
verification_token:    24 bytes
pocket_access_token:   30 bytes
pocket_consumer_key:   30 bytes
slack_api_token:       56 bytes
slack_events_token:    32 bytes
telegram_api_hash:     32 bytes
telegram_token:        46 bytes
#fun-for-life #kubernetes #TIL  #publish'><meta name=keywords content="secret,configmap,kuberntes,"><meta property="og:url" content="https://cychong47.github.io/post/2020/2020-10-19-use-the-secret-and-configmaps/"><meta property="og:site_name" content="Keep calm and Write something"><meta property="og:title" content="Use the Secret and ConfigMaps"><meta property="og:description" content='Use the Secret and ConfigMaps $ cat my-secret.yaml apiVersion: v1 kind: Secret metadata: name: mysecret type: Opaque stringData: WSO2_CLOUD_ORG_KEY: "mycompany" WSO2_CLOUD_EMAIL: "sample-email@wso2.com" WSO2_CLOUD_PASSWORD: "password" $ kubectl apply -f my-secret.yaml secret/mysecret created From Using Kubernetes Secrets as Environment Variables
spec: containers: - env: - name: WSO2_CLOUD_ORG_KEY valueFrom: secretKeyRef: name: mysecret key: WSO2_CLOUD_ORG_KEY ... apiVersion: v1 kind: Secret metadata: name: my-tokens type: Opaque stringData: pinboard_key: "FIXME" pocket_consumer_key: "FIXME" pocket_access_token: "FIXME" slack_api_token: "FIXME" slack_events_token: "FIXME" slack_verification_token: "FIXME" slack_signing_secret: "FIXME" telegram_token: "FIXME" telegram_api_id: "FIXME" telegram_api_hash: "FIXME" $ kubectl apply -f my-tokens.yaml secret/my-tokens created $ kubectl get secrets NAME TYPE DATA AGE default-token-57nq8 kubernetes.io/service-account-token 3 395d grafana Opaque 3 2d23h grafana-test-token-88vrz kubernetes.io/service-account-token 3 2d23h grafana-token-zc79r kubernetes.io/service-account-token 3 2d23h influxdb-token-bjb5d kubernetes.io/service-account-token 3 4d12h my-secret kubernetes.io/dockerconfigjson 1 269d my-tokens Opaque 7 4s sh.helm.release.v1.grafana.v1 helm.sh/release.v1 1 2d23h sh.helm.release.v1.influxdb.v1 helm.sh/release.v1 1 4d12h sh.helm.release.v1.podcast.v1 helm.sh/release.v1 1 4d13h sh.helm.release.v1.sosa0sa.v1 helm.sh/release.v1 1 4d13h $ kubectl get secrets my-tokens NAME TYPE DATA AGE my-tokens Opaque 7 7s $ kubectl describe secret my-tokens Name: my-tokens Namespace: default Labels: <none> Annotations: Type: Opaque Data ==== pinboard_key: 30 bytes slack_signing_secret: 32 bytes telegram_api_id: 7 bytes verification_token: 24 bytes pocket_access_token: 30 bytes pocket_consumer_key: 30 bytes slack_api_token: 56 bytes slack_events_token: 32 bytes telegram_api_hash: 32 bytes telegram_token: 46 bytes #fun-for-life #kubernetes #TIL #publish'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-10-19T14:21:03+09:00"><meta property="article:modified_time" content="2020-10-19T14:21:03+09:00"><meta property="article:tag" content="Secret"><meta property="article:tag" content="Configmap"><meta property="article:tag" content="Kuberntes"><meta property="og:see_also" content="https://cychong47.github.io/post/2020/2020-10-19-how-to-fix-no-timezone-support-of-cronjob/"><meta property="og:see_also" content="https://cychong47.github.io/post/2020/2020-10-09-cronjob-in-kubernetes/"><meta property="og:see_also" content="https://cychong47.github.io/post/2020/2020-10-09-job-instead-of-deployment/"><meta property="og:see_also" content="https://cychong47.github.io/post/2020/2020-09-10-helmize-slackbot/"><meta property="og:see_also" content="https://cychong47.github.io/post/2020/new-things-in-last-4-years/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Use the Secret and ConfigMaps"><meta name=twitter:description content='Use the Secret and ConfigMaps $ cat my-secret.yaml apiVersion: v1 kind: Secret metadata: name: mysecret type: Opaque stringData: WSO2_CLOUD_ORG_KEY: "mycompany" WSO2_CLOUD_EMAIL: "sample-email@wso2.com" WSO2_CLOUD_PASSWORD: "password" $ kubectl apply -f my-secret.yaml secret/mysecret created From Using Kubernetes Secrets as Environment Variables
spec: containers: - env: - name: WSO2_CLOUD_ORG_KEY valueFrom: secretKeyRef: name: mysecret key: WSO2_CLOUD_ORG_KEY ... apiVersion: v1 kind: Secret metadata: name: my-tokens type: Opaque stringData: pinboard_key: "FIXME" pocket_consumer_key: "FIXME" pocket_access_token: "FIXME" slack_api_token: "FIXME" slack_events_token: "FIXME" slack_verification_token: "FIXME" slack_signing_secret: "FIXME" telegram_token: "FIXME" telegram_api_id: "FIXME" telegram_api_hash: "FIXME" $ kubectl apply -f my-tokens.yaml secret/my-tokens created $ kubectl get secrets NAME TYPE DATA AGE default-token-57nq8 kubernetes.io/service-account-token 3 395d grafana Opaque 3 2d23h grafana-test-token-88vrz kubernetes.io/service-account-token 3 2d23h grafana-token-zc79r kubernetes.io/service-account-token 3 2d23h influxdb-token-bjb5d kubernetes.io/service-account-token 3 4d12h my-secret kubernetes.io/dockerconfigjson 1 269d my-tokens Opaque 7 4s sh.helm.release.v1.grafana.v1 helm.sh/release.v1 1 2d23h sh.helm.release.v1.influxdb.v1 helm.sh/release.v1 1 4d12h sh.helm.release.v1.podcast.v1 helm.sh/release.v1 1 4d13h sh.helm.release.v1.sosa0sa.v1 helm.sh/release.v1 1 4d13h $ kubectl get secrets my-tokens NAME TYPE DATA AGE my-tokens Opaque 7 7s $ kubectl describe secret my-tokens Name: my-tokens Namespace: default Labels: <none> Annotations: Type: Opaque Data ==== pinboard_key: 30 bytes slack_signing_secret: 32 bytes telegram_api_id: 7 bytes verification_token: 24 bytes pocket_access_token: 30 bytes pocket_consumer_key: 30 bytes slack_api_token: 56 bytes slack_events_token: 32 bytes telegram_api_hash: 32 bytes telegram_token: 46 bytes #fun-for-life #kubernetes #TIL #publish'><meta itemprop=name content="Use the Secret and ConfigMaps"><meta itemprop=description content='Use the Secret and ConfigMaps $ cat my-secret.yaml apiVersion: v1 kind: Secret metadata: name: mysecret type: Opaque stringData: WSO2_CLOUD_ORG_KEY: "mycompany" WSO2_CLOUD_EMAIL: "sample-email@wso2.com" WSO2_CLOUD_PASSWORD: "password" $ kubectl apply -f my-secret.yaml secret/mysecret created From Using Kubernetes Secrets as Environment Variables
spec: containers: - env: - name: WSO2_CLOUD_ORG_KEY valueFrom: secretKeyRef: name: mysecret key: WSO2_CLOUD_ORG_KEY ... apiVersion: v1 kind: Secret metadata: name: my-tokens type: Opaque stringData: pinboard_key: "FIXME" pocket_consumer_key: "FIXME" pocket_access_token: "FIXME" slack_api_token: "FIXME" slack_events_token: "FIXME" slack_verification_token: "FIXME" slack_signing_secret: "FIXME" telegram_token: "FIXME" telegram_api_id: "FIXME" telegram_api_hash: "FIXME" $ kubectl apply -f my-tokens.yaml secret/my-tokens created $ kubectl get secrets NAME TYPE DATA AGE default-token-57nq8 kubernetes.io/service-account-token 3 395d grafana Opaque 3 2d23h grafana-test-token-88vrz kubernetes.io/service-account-token 3 2d23h grafana-token-zc79r kubernetes.io/service-account-token 3 2d23h influxdb-token-bjb5d kubernetes.io/service-account-token 3 4d12h my-secret kubernetes.io/dockerconfigjson 1 269d my-tokens Opaque 7 4s sh.helm.release.v1.grafana.v1 helm.sh/release.v1 1 2d23h sh.helm.release.v1.influxdb.v1 helm.sh/release.v1 1 4d12h sh.helm.release.v1.podcast.v1 helm.sh/release.v1 1 4d13h sh.helm.release.v1.sosa0sa.v1 helm.sh/release.v1 1 4d13h $ kubectl get secrets my-tokens NAME TYPE DATA AGE my-tokens Opaque 7 7s $ kubectl describe secret my-tokens Name: my-tokens Namespace: default Labels: <none> Annotations: Type: Opaque Data ==== pinboard_key: 30 bytes slack_signing_secret: 32 bytes telegram_api_id: 7 bytes verification_token: 24 bytes pocket_access_token: 30 bytes pocket_consumer_key: 30 bytes slack_api_token: 56 bytes slack_events_token: 32 bytes telegram_api_hash: 32 bytes telegram_token: 46 bytes #fun-for-life #kubernetes #TIL #publish'><meta itemprop=datePublished content="2020-10-19T14:21:03+09:00"><meta itemprop=dateModified content="2020-10-19T14:21:03+09:00"><meta itemprop=wordCount content="204"><meta itemprop=keywords content="Secret,Configmap,Kuberntes"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#fafafa;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>Keep calm and Write something</h2></a><nav><a href=/post/>Post</a>
<a href=/page/>Page</a>
<a href=/series/>Series</a>
<a href=/tags/>Tag</a>
<a href=/archive/>Archive</a>
<a href=/search/>Search</a></nav></header><main><content><h1 id=use-the-secret-and-configmaps>Use the Secret and ConfigMaps</h1><pre tabindex=0><code>$ cat my-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
stringData:
    WSO2_CLOUD_ORG_KEY: &#34;mycompany&#34;
    WSO2_CLOUD_EMAIL: &#34;sample-email@wso2.com&#34;
    WSO2_CLOUD_PASSWORD: &#34;password&#34;

$ kubectl apply -f my-secret.yaml
secret/mysecret created
</code></pre><p>From <a href=https://medium.com/faun/using-kubernetes-secrets-as-environment-variables-5ea3ef7581ef>Using Kubernetes Secrets as Environment Variables</a></p><pre tabindex=0><code>    spec: 
      containers: 
        - 
          env: 
            - 
              name: WSO2_CLOUD_ORG_KEY
              valueFrom:
                secretKeyRef:
                  name: mysecret
                  key: WSO2_CLOUD_ORG_KEY
    ...
</code></pre><p><img src=Use%20the%20Secret%20and%20ConfigMaps/bear_sketch@2x.png alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Secret</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>my-tokens</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>Opaque</span>
</span></span><span style=display:flex><span><span style=color:#f92672>stringData</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pinboard_key</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pocket_consumer_key</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pocket_access_token</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>slack_api_token</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>slack_events_token</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>slack_verification_token</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>slack_signing_secret</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>telegram_token</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>telegram_api_id</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>telegram_api_hash</span>: <span style=color:#e6db74>&#34;FIXME&#34;</span>
</span></span></code></pre></div><pre tabindex=0><code>$ kubectl apply -f my-tokens.yaml 
secret/my-tokens created

$ kubectl get secrets
NAME                             TYPE                                  DATA   AGE
default-token-57nq8              kubernetes.io/service-account-token   3      395d
grafana                          Opaque                                3      2d23h
grafana-test-token-88vrz         kubernetes.io/service-account-token   3      2d23h
grafana-token-zc79r              kubernetes.io/service-account-token   3      2d23h
influxdb-token-bjb5d             kubernetes.io/service-account-token   3      4d12h
my-secret                        kubernetes.io/dockerconfigjson        1      269d
my-tokens                        Opaque                                7      4s
sh.helm.release.v1.grafana.v1    helm.sh/release.v1                    1      2d23h
sh.helm.release.v1.influxdb.v1   helm.sh/release.v1                    1      4d12h
sh.helm.release.v1.podcast.v1    helm.sh/release.v1                    1      4d13h
sh.helm.release.v1.sosa0sa.v1    helm.sh/release.v1                    1      4d13h

$ kubectl get secrets my-tokens
NAME        TYPE     DATA   AGE
my-tokens   Opaque   7      7s

$ kubectl describe secret my-tokens
Name:         my-tokens
Namespace:    default
Labels:       &lt;none&gt;
Annotations:
Type:         Opaque

Data
====
pinboard_key:          30 bytes
slack_signing_secret:  32 bytes
telegram_api_id:       7 bytes
verification_token:    24 bytes
pocket_access_token:   30 bytes
pocket_consumer_key:   30 bytes
slack_api_token:       56 bytes
slack_events_token:    32 bytes
telegram_api_hash:     32 bytes
telegram_token:        46 bytes
</code></pre><p>#fun-for-life #kubernetes #TIL #publish</p></content><p><a href=https://cychong47.github.io/tags/secret/>#Secret</a>
<a href=https://cychong47.github.io/tags/configmap/>#Configmap</a>
<a href=https://cychong47.github.io/tags/kuberntes/>#Kuberntes</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>