<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Web-Scrapping on Keep calm and Write something</title><link>https://cychong47.github.io/tags/web-scrapping/</link><description>Recent content in Web-Scrapping on Keep calm and Write something</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Mon, 17 Dec 2018 13:24:07 +0000</lastBuildDate><atom:link href="https://cychong47.github.io/tags/web-scrapping/index.xml" rel="self" type="application/rss+xml"/><item><title>Get the latest jetpack plugin</title><link>https://cychong47.github.io/post/2018/get-the-latest-jetpack-plugin/</link><pubDate>Sun, 16 Dec 2018 06:55:44 +0900</pubDate><guid>https://cychong47.github.io/post/2018/get-the-latest-jetpack-plugin/</guid><description>&lt;p&gt;&lt;a href="http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/"&gt;http://sosa0sa.com:2368/use-jetpack-for-wordpress-5-0/&lt;/a&gt; 의 연장선. Jetpack plugin의 최신 버전을 알아내서 자동으로 해당 바이너리 파일을 다운로드 받아 보자.&lt;/p&gt;
&lt;p&gt;몇 가지 module 을 사용하는데 필요한 module은 &lt;a href="https://realpython.com/python-web-scraping-practical-introduction/"&gt;https://realpython.com/python-web-scraping-practical-introduction/&lt;/a&gt; 을 참고해서 설치&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$ python3 -m venv venv
$ . ./venv/bin/activate
$ pip3 install requests BeautifulSoup4
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="webscrappy"&gt;webscrap.py&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from requests import get
from requests.exceptions import RequestException
from contextlib import closing
from bs4 import BeautifulSoup
from urllib.request import *

&amp;#39;&amp;#39;&amp;#39;
https://realpython.com/python-web-scraping-practical-introduction/
&amp;#39;&amp;#39;&amp;#39;

def simple_get(url):
 &amp;#34;&amp;#34;&amp;#34;
 Attempts to get the content at `url` by making an HTTP GET request.
 If the content-type of response is some kind of HTML/XML, return the
 text content, otherwise return None.
 &amp;#34;&amp;#34;&amp;#34;
 try:
 with closing(get(url, stream=True)) as resp:
 if is_good_response(resp):
 return resp.content
 else:
 return None

 except RequestException as e:
 log_error(&amp;#39;Error during requests to {0} : {1}&amp;#39;.format(url, str(e)))
 return None


def is_good_response(resp):
 &amp;#34;&amp;#34;&amp;#34;
 Returns True if the response seems to be HTML, False otherwise.
 &amp;#34;&amp;#34;&amp;#34;
 content_type = resp.headers[&amp;#39;Content-Type&amp;#39;].lower()
 return (resp.status_code == 200
 and content_type is not None
 and content_type.find(&amp;#39;html&amp;#39;) &amp;gt; -1)


def log_error(e):
 &amp;#34;&amp;#34;&amp;#34;
 It is always a good idea to log errors.
 This function just prints them, but you can
 make it do anything.
 &amp;#34;&amp;#34;&amp;#34;
 print(e)

def download_file(base_url, filename):
	file_url = &amp;#39;%s/%s&amp;#39; %(base_url, filename)

	print(&amp;#34;Download %s&amp;#34; %(file_url))
 
	try:
		from tqdm import tqdm
	except:
		urlretrieve(file_url, filename)
		return

	# use tqdm to display the progress but too slow
	file_response = get(file_url, stream=True)
	with open(filename, &amp;#39;wb&amp;#39;) as handle:
		for data in tqdm(file_response.iter_content()):
			handle.write(data)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Jetpack plugin 페이지에 있는 버전 정보를 이용해서 플러그인 다운로드 하기
tqdm은 progress를 보여주는 모듈인데 그냥 사용하면 속도가 너무 너무 느리다. 몇 초면 다운 받을 수 있는 파일을 1분에 걸쳐 받는&amp;hellip;&lt;/p&gt;</description></item></channel></rss>